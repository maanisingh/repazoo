import{c as w,r as k,j as e,S as R,d as i,B as F,az as P,L as B}from"./index-H4DaqSpq.js";import{u as H}from"./useQuery-Rv5Od9FD.js";import{B as d}from"./badge-pi7sX806.js";import{C as u,a as h,b as p,c as y,d as j}from"./card-C0ZjAVn9.js";import{S as E}from"./separator-DONs4C7t.js";import{S as U,C as V}from"./search-DeIJKnzn.js";import{H as q,T as O,P as G}from"./theme-switch-C5tdu85W.js";import{M as K}from"./main-D5uzAE8u.js";import{n8nClient as W}from"./repazoo-client-hBgkOjH6.js";import{R as Q}from"./risk-gauge-BJ8qHWpa.js";import{T as A}from"./twitter-B7-zA5FH.js";import{D as g}from"./database-DDJJCPA0.js";import{B as T}from"./brain-B-WEZoDN.js";import{C}from"./circle-check-BLnpqHR7.js";import{C as z,T as Y}from"./thumbs-down-C6LC14-I.js";import{L as M}from"./loader-circle-5YA-BuFT.js";import{R as f}from"./refresh-cw-CEViQTj1.js";import{T as $}from"./trending-up-B0C1Zg_d.js";import{E as D}from"./eye-CdBRBZ6q.js";import{T as _}from"./triangle-alert-D83IU5E5.js";import{F as J,T as X}from"./thumbs-up-9IsxYKNb.js";import{C as Z}from"./chevron-up-B8exOOsA.js";import{C as I}from"./chevron-down-gc8dYoSV.js";import{f as S}from"./format-Dp3w_Y3x.js";import{A as ee}from"./arrow-left-DwvnLM5l.js";import"./index-DOV0-nUu.js";import"./index-D0zLoMui.js";import"./index-D1IO__54.js";import"./index-DG8OgmhZ.js";import"./index-DTAvTyP8.js";import"./index-BVj6NEvJ.js";import"./index-BTLX_OZX.js";import"./index-CQiHdsHp.js";import"./index-hI_Qe1FL.js";import"./index-D8QmCQ3_.js";import"./index-DIPJ9e2F.js";import"./search-provider-BrsfzY6n.js";import"./command-D6Zdrqg1.js";import"./index-EzDm0lmA.js";import"./index-CZMQeqyZ.js";import"./dialog-BUsDf1C4.js";import"./scroll-area-B7G2E8-s.js";import"./index-BdQq_4o_.js";import"./sign-out-dialog-hk5uccCc.js";import"./index-DAIdUsKU.js";import"./check-s5UCxJch.js";import"./chevron-right-BARXRStm.js";import"./shield-alert-DNCMqb7A.js";/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const se=[["path",{d:"M13.997 4a2 2 0 0 1 1.76 1.05l.486.9A2 2 0 0 0 18.003 7H20a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V9a2 2 0 0 1 2-2h1.997a2 2 0 0 0 1.759-1.048l.489-.904A2 2 0 0 1 10.004 4z",key:"18u6gg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]],te=w("camera",se);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ae=[["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M4.268 21a2 2 0 0 0 1.727 1H18a2 2 0 0 0 2-2V7l-5-5H6a2 2 0 0 0-2 2v3",key:"ms7g94"}],["path",{d:"m9 18-1.5-1.5",key:"1j6qii"}],["circle",{cx:"5",cy:"14",r:"3",key:"ufru5t"}]],re=w("file-search",ae);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ne=[["path",{d:"M2 9.5a5.5 5.5 0 0 1 9.591-3.676.56.56 0 0 0 .818 0A5.49 5.49 0 0 1 22 9.5c0 2.29-1.5 4-3 5.5l-5.492 5.313a2 2 0 0 1-3 .019L5 15c-1.5-1.5-3-3.2-3-5.5",key:"mvr1a0"}]],le=w("heart",ne);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ie=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"8",x2:"16",y1:"15",y2:"15",key:"1xb1d9"}],["line",{x1:"9",x2:"9.01",y1:"9",y2:"9",key:"yxxnd0"}],["line",{x1:"15",x2:"15.01",y1:"9",y2:"9",key:"1p4y9e"}]],ce=w("meh",ie);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const de=[["path",{d:"M22 17a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 21.286V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2z",key:"18887p"}]],L=w("message-square",de);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const me=[["path",{d:"m2 9 3-3 3 3",key:"1ltn5i"}],["path",{d:"M13 18H7a2 2 0 0 1-2-2V6",key:"1r6tfw"}],["path",{d:"m22 15-3 3-3-3",key:"4rnwn2"}],["path",{d:"M11 6h6a2 2 0 0 1 2 2v10",key:"2f72bc"}]],xe=w("repeat-2",me);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oe=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 14s1.5 2 4 2 4-2 4-2",key:"1y1vjs"}],["line",{x1:"9",x2:"9.01",y1:"9",y2:"9",key:"yxxnd0"}],["line",{x1:"15",x2:"15.01",y1:"9",y2:"9",key:"1p4y9e"}]],b=w("smile",oe);function ue({className:s,twitterHandle:l,cacheInfo:a}){const[r,m]=k.useState(0),t=()=>a?.used_cached_tweets?"Checking for new tweets":"Fetching recent tweets",x=()=>a?.used_cached_tweets&&a.new_tweets_fetched===0?`Using ${a.total_tweets_cached||0} cached tweets (up to date)`:a?.new_tweets_fetched?`Found ${a.new_tweets_fetched} new tweets, using cache for the rest`:`Retrieving tweets from @${l||"user"}`,N=()=>a?.used_cached_analysis?"Reusing previous analysis":a?.new_tweets_analyzed&&a.new_tweets_analyzed<(a.total_tweets_cached||0)?"Analyzing new tweets only":"Analyzing content with AI",c=()=>a?.used_cached_analysis?"No new content, using previous results":a?.new_tweets_analyzed!==void 0&&a.new_tweets_analyzed>0?`Analyzing ${a.new_tweets_analyzed} new tweets from @${l}'s account (${a.total_tweets_cached||0} total cached)`:a?.total_tweets_cached?`Analyzing ${a.total_tweets_cached} tweets from @${l}'s timeline`:`Analyzing tweets from @${l}'s account with AI`,o=[{id:"connect",label:"Connecting to Twitter API",status:r>0?"complete":r===0?"active":"pending",icon:e.jsx(A,{className:"h-4 w-4"}),detail:"Authenticating and establishing secure connection"},{id:"fetch",label:t(),status:r>1?"complete":r===1?"active":"pending",icon:a?.used_cached_tweets?e.jsx(g,{className:"h-4 w-4"}):e.jsx(re,{className:"h-4 w-4"}),detail:x()},{id:"analyze",label:N(),status:r>2?"complete":r===2?"active":"pending",icon:a?.used_cached_analysis?e.jsx(g,{className:"h-4 w-4"}):e.jsx(T,{className:"h-4 w-4"}),detail:c()},{id:"risk",label:"Calculating risk scores",status:r>3?"complete":r===3?"active":"pending",icon:e.jsx(R,{className:"h-4 w-4"}),detail:"Evaluating sentiment, toxicity, and reputation factors"},{id:"report",label:"Generating final report",status:r>4?"complete":r===4?"active":"pending",icon:e.jsx(C,{className:"h-4 w-4"}),detail:"Compiling findings and recommendations"}];return k.useEffect(()=>{const n=setInterval(()=>{m(v=>v>=o.length-1?(clearInterval(n),v):v+1)},4e3);return()=>clearInterval(n)},[o.length]),e.jsxs("div",{className:i("space-y-6",s),children:[e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(z,{className:"h-5 w-5 animate-spin text-primary"}),e.jsx("span",{className:"text-sm font-medium",children:"Scan In Progress"})]}),e.jsx("div",{className:"relative h-2 w-full overflow-hidden rounded-full bg-muted",children:e.jsx("div",{className:"scan-progress-bar h-full bg-primary"})})]}),e.jsx("div",{className:"space-y-3",children:o.map(n=>e.jsxs("div",{className:i("flex items-start gap-3 rounded-lg border p-3 transition-all duration-300",n.status==="active"&&"border-primary/50 bg-primary/5",n.status==="complete"&&"border-green-500/30 bg-green-500/5 opacity-60",n.status==="pending"&&"border-muted-foreground/20 opacity-40"),children:[e.jsx("div",{className:i("mt-0.5 flex h-6 w-6 items-center justify-center rounded-full",n.status==="active"&&"bg-primary/20 text-primary",n.status==="complete"&&"bg-green-500/20 text-green-500",n.status==="pending"&&"bg-muted text-muted-foreground"),children:n.status==="active"?e.jsx(M,{className:"h-4 w-4 animate-spin"}):n.status==="complete"?e.jsx(C,{className:"h-4 w-4"}):n.icon}),e.jsxs("div",{className:"flex-1 space-y-1",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:i("text-sm font-medium",n.status==="active"&&"text-foreground",n.status==="complete"&&"text-muted-foreground",n.status==="pending"&&"text-muted-foreground"),children:n.label}),n.status==="active"&&e.jsx("span",{className:"text-xs text-muted-foreground",children:"In progress..."}),n.status==="complete"&&e.jsx("span",{className:"text-xs text-green-500",children:"âœ“ Done"})]}),n.detail&&n.status!=="pending"&&e.jsx("p",{className:"text-xs text-muted-foreground",children:n.detail})]})]},n.id))}),r===2&&e.jsx("div",{className:"space-y-2 animate-in fade-in-0 slide-in-from-bottom-2 duration-300",children:e.jsxs("div",{className:"rounded-lg border border-primary/30 bg-primary/5 p-3 space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(T,{className:"h-4 w-4 animate-pulse text-primary"}),e.jsx("p",{className:"text-sm font-medium text-foreground",children:"Analyzing your real tweets with AI..."})]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:a?.total_tweets_cached?`Processing ${a.total_tweets_cached} tweets from @${l}'s account using Llama 3`:`Processing tweets from @${l}'s account using local AI`})]})}),e.jsxs("div",{className:"rounded-lg bg-muted/50 p-3 text-xs text-muted-foreground",children:["ðŸ’¡ ",e.jsx("span",{className:"font-medium",children:"Tip:"})," This process typically takes 1-3 minutes depending on account activity. You can safely leave this page and check back later."]})]})}function he({cacheInfo:s,className:l}){if(!s)return e.jsxs(u,{className:i(l),children:[e.jsxs(h,{children:[e.jsxs(p,{className:"flex items-center gap-2 text-lg",children:[e.jsx(A,{className:"h-5 w-5"}),"Data Source"]}),e.jsx(y,{children:"Information about the analyzed data"})]}),e.jsx(j,{children:e.jsx("div",{className:"space-y-3",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"rounded-full bg-blue-100 p-2",children:e.jsx(f,{className:"h-4 w-4 text-blue-600"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-medium",children:"Fresh Scan"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"All data fetched and analyzed from Twitter API"})]})]})})})]});const a=r=>{if(!r)return"Unknown";const m=new Date(r),x=Math.floor((new Date().getTime()-m.getTime())/(1e3*60*60));if(x<1)return"Less than 1 hour ago";if(x<24)return`${x} hour${x>1?"s":""} ago`;const N=Math.floor(x/24);return`${N} day${N>1?"s":""} ago`};return e.jsxs(u,{className:i(l),children:[e.jsxs(h,{children:[e.jsxs(p,{className:"flex items-center gap-2 text-lg",children:[e.jsx(g,{className:"h-5 w-5"}),"Data Source"]}),e.jsx(y,{children:"How this analysis was performed"})]}),e.jsx(j,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:i("rounded-full p-2",s.used_cached_tweets?"bg-green-100":"bg-blue-100"),children:s.used_cached_tweets?e.jsx(g,{className:"h-4 w-4 text-green-600"}):e.jsx(f,{className:"h-4 w-4 text-blue-600"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-medium",children:s.used_cached_tweets?"Smart Cache Active":"Fresh Data Fetch"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:s.used_cached_tweets?`Using ${s.total_tweets_cached||0} cached tweets for faster analysis`:"All data fetched directly from Twitter API"})]})]}),s.new_tweets_fetched!==void 0&&s.new_tweets_fetched>0&&e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"rounded-full bg-blue-100 p-2",children:e.jsx($,{className:"h-4 w-4 text-blue-600"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-medium",children:"New Content Detected"}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:["Found and analyzed ",s.new_tweets_fetched," new tweet",s.new_tweets_fetched>1?"s":""," since last scan"]})]})]}),e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:i("rounded-full p-2",s.used_cached_analysis?"bg-purple-100":"bg-orange-100"),children:s.used_cached_analysis?e.jsx(g,{className:"h-4 w-4 text-purple-600"}):e.jsx(f,{className:"h-4 w-4 text-orange-600"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-medium",children:s.used_cached_analysis?"Reused Previous Analysis":"Fresh AI Analysis"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:s.used_cached_analysis?"No new content detected, using previous analysis results":s.new_tweets_analyzed!==void 0?`AI analyzed ${s.new_tweets_analyzed} tweet${s.new_tweets_analyzed>1?"s":""}`:"AI processed all content for this scan"})]})]}),s.last_sync&&e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"rounded-full bg-gray-100 p-2",children:e.jsx(z,{className:"h-4 w-4 text-gray-600"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-medium",children:"Last Twitter Sync"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:a(s.last_sync)})]})]}),s.used_cached_tweets&&e.jsx("div",{className:"mt-4 rounded-lg bg-green-50 p-3 border border-green-100",children:e.jsxs("p",{className:"text-xs text-green-800",children:[e.jsx("span",{className:"font-semibold",children:"ðŸ’¡ Smart Caching Benefit:"})," This scan was faster and more efficient by reusing cached data. We only fetch and analyze new content, saving time and API calls."]})})]})})]})}function pe({cacheInfo:s,needsRefresh:l=!1,className:a,variant:r="default"}){return s?l?e.jsxs(d,{variant:"outline",className:i("bg-yellow-50 text-yellow-700",a),children:[e.jsx(f,{className:"mr-1 h-3 w-3"}),"Will fetch new tweets"]}):r==="detailed"?e.jsxs("div",{className:i("flex flex-wrap gap-2",a),children:[s.used_cached_tweets&&e.jsxs(d,{variant:"outline",className:"bg-green-50 text-green-700",children:[e.jsx(g,{className:"mr-1 h-3 w-3"}),s.total_tweets_cached||0," tweets cached"]}),s.new_tweets_fetched!==void 0&&s.new_tweets_fetched>0&&e.jsxs(d,{variant:"outline",className:"bg-blue-50 text-blue-700",children:[e.jsx(f,{className:"mr-1 h-3 w-3"}),s.new_tweets_fetched," new tweets fetched"]}),s.used_cached_analysis&&e.jsxs(d,{variant:"outline",className:"bg-purple-50 text-purple-700",children:[e.jsx(g,{className:"mr-1 h-3 w-3"}),"Reused previous analysis"]}),s.new_tweets_analyzed!==void 0&&s.new_tweets_analyzed>0&&e.jsxs(d,{variant:"outline",className:"bg-orange-50 text-orange-700",children:[e.jsx(f,{className:"mr-1 h-3 w-3"}),s.new_tweets_analyzed," tweets analyzed"]}),s.last_sync&&e.jsxs(d,{variant:"outline",className:"bg-gray-50 text-gray-700",children:[e.jsx(z,{className:"mr-1 h-3 w-3"}),"Last sync: ",new Date(s.last_sync).toLocaleDateString()]})]}):s.used_cached_analysis?e.jsxs(d,{variant:"outline",className:i("bg-purple-50 text-purple-700",a),children:[e.jsx(g,{className:"mr-1 h-3 w-3"}),"Used cached analysis"]}):s.used_cached_tweets?e.jsxs(d,{variant:"outline",className:i("bg-green-50 text-green-700",a),children:[e.jsx(g,{className:"mr-1 h-3 w-3"}),"Up to date"]}):e.jsxs(d,{variant:"outline",className:i("bg-blue-50 text-blue-700",a),children:[e.jsx(f,{className:"mr-1 h-3 w-3"}),"Fresh scan"]}):e.jsxs(d,{variant:"outline",className:i("bg-blue-50 text-blue-700",a),children:[e.jsx(f,{className:"mr-1 h-3 w-3"}),"First scan"]})}function je({hasImages:s,hasAnalysis:l,inappropriateContent:a,severity:r="low",className:m}){if(!s)return null;const t={low:"border-green-500/50 bg-green-500/10 text-green-700 dark:text-green-400",medium:"border-yellow-500/50 bg-yellow-500/10 text-yellow-700 dark:text-yellow-400",high:"border-orange-500/50 bg-orange-500/10 text-orange-700 dark:text-orange-400",critical:"border-red-500/50 bg-red-500/10 text-red-700 dark:text-red-400"};return e.jsxs("div",{className:i("flex items-center gap-1.5",m),children:[e.jsxs(d,{variant:"outline",className:"gap-1",children:[e.jsx(te,{className:"h-3 w-3"}),e.jsx("span",{className:"text-xs",children:"Image"})]}),l&&e.jsxs(d,{variant:"outline",className:"gap-1 border-blue-500/50 bg-blue-500/10 text-blue-700 dark:text-blue-400",children:[e.jsx(D,{className:"h-3 w-3"}),e.jsx("span",{className:"text-xs",children:"AI Analyzed"})]}),a&&e.jsxs(d,{variant:"outline",className:i("gap-1",t[r]),children:[e.jsx(_,{className:"h-3 w-3"}),e.jsxs("span",{className:"text-xs capitalize",children:[r," Risk"]})]})]})}function ge({imageAnalysis:s,className:l}){if(!s?.summary)return null;const{summary:a}=s,r=m=>{switch(m.toLowerCase()){case"positive":return e.jsx(b,{className:"h-4 w-4 text-green-500"});case"negative":return e.jsx(b,{className:"h-4 w-4 text-red-500 rotate-180"});default:return e.jsx(b,{className:"h-4 w-4 text-gray-500"})}};return e.jsxs("div",{className:i("space-y-3",l),children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(D,{className:"h-4 w-4 text-muted-foreground"}),e.jsx("h4",{className:"text-sm font-semibold",children:"AI Vision Analysis"})]}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"rounded-md bg-muted/50 p-3",children:[e.jsx("p",{className:"text-muted-foreground text-xs font-medium mb-1",children:"Scene Description:"}),e.jsx("p",{className:"text-foreground",children:a.combined_description})]}),a.all_ocr_text&&a.all_ocr_text.length>0&&e.jsxs("div",{className:"rounded-md bg-blue-500/5 border border-blue-500/20 p-3",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx(J,{className:"h-3.5 w-3.5 text-blue-600 dark:text-blue-400"}),e.jsx("p",{className:"text-xs font-medium text-blue-600 dark:text-blue-400",children:"Text Found in Image:"})]}),e.jsxs("p",{className:"text-foreground font-mono text-xs",children:['"',a.all_ocr_text.join(", "),'"']})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[r(a.overall_sentiment),e.jsx("span",{className:"text-xs text-muted-foreground",children:"Image Sentiment:"}),e.jsx("span",{className:"text-xs font-medium capitalize",children:a.overall_sentiment})]}),a.has_inappropriate_content?e.jsxs("div",{className:"rounded-md bg-red-500/10 border border-red-500/20 p-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(_,{className:"h-4 w-4 text-red-600 dark:text-red-400"}),e.jsx("p",{className:"text-sm font-medium text-red-600 dark:text-red-400",children:"âš ï¸ Inappropriate Content Detected"})]}),e.jsxs("p",{className:"text-xs text-red-600/80 dark:text-red-400/80 mt-1",children:["Severity: ",e.jsx("span",{className:"font-semibold capitalize",children:a.max_severity})]})]}):e.jsx("div",{className:"flex items-center gap-2 text-green-600 dark:text-green-400",children:e.jsx("span",{className:"text-xs",children:"âœ… No inappropriate content detected"})}),s.analyses&&s.analyses.length>0&&e.jsxs("div",{className:"text-xs text-muted-foreground",children:["Confidence: ",Math.round(s.analyses[0].confidence_score*100),"%"]})]})]})}function ye({tweet:s,index:l,className:a}){const[r,m]=k.useState(!1),t=s.has_image_analysis&&s.image_analysis?.summary,x=()=>{if(!s.image_analysis?.summary?.has_inappropriate_content)return"border-border";switch(s.image_analysis.summary.max_severity){case"critical":return"border-red-500/50";case"high":return"border-orange-500/50";case"medium":return"border-yellow-500/50";default:return"border-border"}};return e.jsxs("div",{className:i("border rounded-lg transition-all duration-200",x(),r?"bg-muted/20":"hover:bg-muted/50",a),children:[e.jsxs("div",{className:"p-4 space-y-3",children:[e.jsxs("div",{className:"space-y-2",children:[l!==void 0&&e.jsxs("div",{className:"text-xs text-muted-foreground font-mono",children:["Tweet #",l+1]}),e.jsx("p",{className:"text-sm leading-relaxed",children:s.text})]}),e.jsx(je,{hasImages:s.has_media,hasAnalysis:s.has_image_analysis,inappropriateContent:s.image_analysis?.summary?.has_inappropriate_content,severity:s.image_analysis?.summary?.max_severity}),e.jsxs("div",{className:"flex items-center justify-between pt-2 border-t",children:[e.jsxs("div",{className:"flex items-center gap-4 text-xs text-muted-foreground",children:[e.jsx("span",{children:S(new Date(s.created_at),"MMM d, yyyy")}),s.public_metrics&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(le,{className:"h-3 w-3"}),e.jsx("span",{children:s.public_metrics.likes||0})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(xe,{className:"h-3 w-3"}),e.jsx("span",{children:s.public_metrics.retweets||0})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(L,{className:"h-3 w-3"}),e.jsx("span",{children:s.public_metrics.replies||0})]}),s.public_metrics.views!==void 0&&e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(D,{className:"h-3 w-3"}),e.jsx("span",{children:s.public_metrics.views||0})]})]})]}),t&&e.jsx(F,{variant:"ghost",size:"sm",onClick:()=>m(!r),className:"h-7 text-xs",children:r?e.jsxs(e.Fragment,{children:["Collapse",e.jsx(Z,{className:"ml-1 h-3 w-3"})]}):e.jsxs(e.Fragment,{children:["View Analysis",e.jsx(I,{className:"ml-1 h-3 w-3"})]})})]})]}),r&&t&&e.jsx("div",{className:"px-4 pb-4 border-t bg-muted/30",children:e.jsx("div",{className:"pt-4",children:e.jsx(ge,{imageAnalysis:s.image_analysis})})})]})}function us(){const{scanId:s}=P.useParams(),{data:l,isLoading:a,isError:r,error:m}=H({queryKey:["scan",s],queryFn:()=>W.getScanById(s)}),t=l?.scan,x=c=>{switch(c?.toLowerCase()){case"low":return"default";case"medium":return"secondary";case"high":return"destructive";default:return"outline"}},N=c=>{switch(c.toLowerCase()){case"completed":return"default";case"processing":return"secondary";case"failed":return"destructive";case"pending":return"outline";default:return"outline"}};return e.jsxs(e.Fragment,{children:[e.jsxs(q,{fixed:!0,children:[e.jsx(U,{}),e.jsxs("div",{className:"ms-auto flex items-center space-x-4",children:[e.jsx(O,{}),e.jsx(V,{}),e.jsx(G,{})]})]}),e.jsxs(K,{children:[e.jsx("div",{className:"mb-6",children:e.jsx(F,{asChild:!0,variant:"ghost",size:"sm",className:"mb-4",children:e.jsxs(B,{to:"/scans",children:[e.jsx(ee,{className:"mr-2 h-4 w-4"}),"Back to Scans"]})})}),a?e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsx(M,{className:"h-8 w-8 animate-spin text-muted-foreground"})}):r?e.jsxs("div",{className:"flex flex-col items-center justify-center py-12",children:[e.jsx("p",{className:"text-destructive text-lg font-medium",children:"Failed to load scan details"}),e.jsx("p",{className:"text-muted-foreground text-sm mt-2",children:m instanceof Error?m.message:"Unknown error occurred"})]}):t?e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col gap-4 md:flex-row md:items-start md:justify-between",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-3xl font-bold tracking-tight flex items-center gap-3",children:["@",t.twitter_handle,e.jsx(d,{variant:N(t.status),children:t.status})]}),e.jsxs("p",{className:"text-muted-foreground mt-2",children:["Scan ID: ",t.scan_id]}),e.jsxs("p",{className:"text-muted-foreground text-sm",children:["Created on ",S(new Date(t.created_at),"MMMM d, yyyy 'at' HH:mm")]}),t.completed_at&&e.jsxs("p",{className:"text-muted-foreground text-sm",children:["Completed on ",S(new Date(t.completed_at),"MMMM d, yyyy 'at' HH:mm")]})]}),t.status==="completed"&&(t.summary||t.analysis_result)&&e.jsx("div",{className:"flex justify-center",children:e.jsx(Q,{score:t.summary?.overall_score??t.analysis_result?.overall_score??0,size:"lg",showLabel:!0})})]}),e.jsx(E,{}),t.status==="failed"&&t.error_message&&e.jsxs(u,{className:"border-destructive",children:[e.jsx(h,{children:e.jsxs(p,{className:"flex items-center gap-2 text-destructive",children:[e.jsx(_,{className:"h-5 w-5"}),"Scan Failed"]})}),e.jsx(j,{children:e.jsx("p",{className:"text-sm",children:t.error_message})})]}),(t.status==="processing"||t.status==="pending")&&e.jsxs(u,{children:[e.jsxs(h,{children:[e.jsx(p,{children:"Scan In Progress"}),e.jsxs(y,{children:["Analyzing @",t.twitter_handle,"'s Twitter profile and activity"]})]}),e.jsx(j,{children:e.jsx(ue,{twitterHandle:t.twitter_handle,cacheInfo:t.cache_info||null})})]}),t.status==="completed"&&t.analysis_result&&e.jsxs(e.Fragment,{children:[t.cache_info&&e.jsx("div",{className:"flex justify-start",children:e.jsx(pe,{cacheInfo:t.cache_info,variant:"detailed"})}),e.jsxs("div",{className:"grid gap-6 md:grid-cols-2",children:[e.jsx(he,{cacheInfo:t.cache_info||null,className:"md:col-span-2"}),e.jsxs(u,{children:[e.jsxs(h,{children:[e.jsx(p,{children:"Risk Overview"}),e.jsx(y,{children:"Overall risk assessment"})]}),e.jsxs(j,{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm font-medium",children:"Risk Level"}),e.jsx(d,{variant:x(t.analysis_result.risk_level),children:t.analysis_result.risk_level})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm font-medium",children:"Overall Score"}),e.jsx("span",{className:"text-lg font-bold",children:t.analysis_result.overall_score.toFixed(1)})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm font-medium",children:"Toxicity Score"}),e.jsx("span",{className:"text-lg font-bold",children:t.analysis_result.toxicity_score.toFixed(1)})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm font-medium",children:"Hate Speech Detected"}),t.analysis_result.hate_speech_detected?e.jsx(_,{className:"h-5 w-5 text-destructive"}):e.jsx(C,{className:"h-5 w-5 text-green-500"})]})]})]}),e.jsxs(u,{children:[e.jsxs(h,{children:[e.jsx(p,{children:"Sentiment Analysis"}),e.jsx(y,{children:"Tweet sentiment breakdown"})]}),e.jsx(j,{className:"space-y-4",children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(X,{className:"h-4 w-4 text-green-500"}),e.jsx("span",{className:"text-sm font-medium",children:"Positive"})]}),e.jsxs("span",{className:"text-lg font-bold",children:[(t.analysis_result.sentiment.positive*100).toFixed(1),"%"]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ce,{className:"h-4 w-4 text-yellow-500"}),e.jsx("span",{className:"text-sm font-medium",children:"Neutral"})]}),e.jsxs("span",{className:"text-lg font-bold",children:[(t.analysis_result.sentiment.neutral*100).toFixed(1),"%"]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Y,{className:"h-4 w-4 text-red-500"}),e.jsx("span",{className:"text-sm font-medium",children:"Negative"})]}),e.jsxs("span",{className:"text-lg font-bold",children:[(t.analysis_result.sentiment.negative*100).toFixed(1),"%"]})]})]})})]}),t.analysis_result.key_findings&&t.analysis_result.key_findings.length>0&&e.jsxs(u,{className:"md:col-span-2",children:[e.jsxs(h,{children:[e.jsxs(p,{className:"flex items-center gap-2",children:[e.jsx($,{className:"h-5 w-5"}),"Key Findings"]}),e.jsx(y,{children:"Important observations from the analysis"})]}),e.jsx(j,{children:e.jsx("ul",{className:"space-y-2",children:t.analysis_result.key_findings.map((c,o)=>e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"text-muted-foreground mt-1",children:"â€¢"}),e.jsx("span",{className:"text-sm",children:c})]},o))})})]}),t.analysis_result.recommendations&&t.analysis_result.recommendations.length>0&&e.jsxs(u,{className:"md:col-span-2",children:[e.jsxs(h,{children:[e.jsxs(p,{className:"flex items-center gap-2",children:[e.jsx(L,{className:"h-5 w-5"}),"Recommendations"]}),e.jsx(y,{children:"Actions to improve reputation"})]}),e.jsx(j,{children:e.jsx("ul",{className:"space-y-2",children:t.analysis_result.recommendations.map((c,o)=>e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"text-muted-foreground mt-1",children:"â€¢"}),e.jsx("span",{className:"text-sm",children:c})]},o))})})]}),t.analysis_result.tweets_list&&t.analysis_result.tweets_list.length>0&&e.jsxs(u,{className:"md:col-span-2",children:[e.jsxs(h,{children:[e.jsxs(p,{className:"flex items-center gap-2",children:[e.jsx(A,{className:"h-5 w-5"}),"Analyzed Tweets"]}),e.jsxs(y,{children:[t.analysis_result.tweets_analyzed||t.analysis_result.tweets_list.length," tweets analyzed in this scan",t.analysis_result.tweets_list.some(c=>c.has_image_analysis)&&e.jsxs("span",{className:"ml-2 text-blue-600 dark:text-blue-400",children:["â€¢ ",t.analysis_result.tweets_list.filter(c=>c.has_image_analysis).length," with AI vision analysis"]})]})]}),e.jsx(j,{children:e.jsx("div",{className:"space-y-3",children:t.analysis_result.tweets_list.map((c,o)=>e.jsx(ye,{tweet:c,index:o},o))})})]})]})]})]}):e.jsx("div",{className:"flex flex-col items-center justify-center py-12",children:e.jsx("p",{className:"text-muted-foreground text-lg",children:"Scan not found"})})]})]})}export{us as component};
