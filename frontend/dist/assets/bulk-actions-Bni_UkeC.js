import{c as I,j as e,d as F,r as y,B as D}from"./index-Ddobsr3m.js";import{e as P}from"./form-B29Jnd6R.js";import{S as E,a as K,b as R,c as $,d as N}from"./select-C64Jyn7W.js";import{B}from"./badge-DcyDFdEW.js";import{S as T}from"./separator-CaQnzJpH.js";import{T as G,F as L,G as _}from"./sign-out-dialog-zjgScZaj.js";import{X as q}from"./index-CvLqFEPX.js";/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H=[["path",{d:"M12 2v4",key:"3427ic"}],["path",{d:"m16.2 7.8 2.9-2.9",key:"r700ao"}],["path",{d:"M18 12h4",key:"wj9ykh"}],["path",{d:"m16.2 16.2 2.9 2.9",key:"1bxg5t"}],["path",{d:"M12 18v4",key:"jadmvz"}],["path",{d:"m4.9 19.1 2.9-2.9",key:"bwix9q"}],["path",{d:"M2 12h4",key:"j09sii"}],["path",{d:"m4.9 4.9 2.9 2.9",key:"giyufr"}]],U=I("loader",H);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],oe=I("trash-2",V);function ne({defaultValue:x,onValueChange:l,isPending:p,items:b,placeholder:r,disabled:f,className:d="",isControlled:h=!1}){const g=h?{value:x,onValueChange:l}:{defaultValue:x,onValueChange:l};return e.jsxs(E,{...g,children:[e.jsx(P,{children:e.jsx(K,{disabled:f,className:F(d),children:e.jsx(R,{placeholder:r??"Select"})})}),e.jsx($,{children:p?e.jsx(N,{disabled:!0,value:"loading",className:"h-14",children:e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx(U,{className:"h-5 w-5 animate-spin"}),"  ","Loading..."]})}):b?.map(({label:v,value:i})=>e.jsx(N,{value:i,children:v},i))})]})}function ae(x){const{search:l,navigate:p,pagination:b,globalFilter:r,columnFilters:f=[]}=x,d=b?.pageKey??"page",h=b?.pageSizeKey??"pageSize",g=b?.defaultPage??1,v=b?.defaultPageSize??10,i=r?.key??"filter",c=r?.enabled??!0,k=r?.trim??!0,u=y.useMemo(()=>{const t=[];for(const s of f){const n=l[s.searchKey],o=s.deserialize??(a=>a);if(s.type==="string"){const a=o(n)??"";typeof a=="string"&&a.trim()!==""&&t.push({id:s.columnId,value:a})}else{const a=o(n)??[];Array.isArray(a)&&a.length>0&&t.push({id:s.columnId,value:a})}}return t},[f,l]),[j,w]=y.useState(u),S=y.useMemo(()=>{const t=l[d],s=l[h],n=typeof t=="number"?t:g,o=typeof s=="number"?s:v;return{pageIndex:Math.max(0,n-1),pageSize:o}},[l,d,h,g,v]),M=t=>{const s=typeof t=="function"?t(S):t,n=s.pageIndex+1,o=s.pageSize;p({search:a=>({...a,[d]:n<=g?void 0:n,[h]:o===v?void 0:o})})},[C,A]=y.useState(()=>{if(!c)return;const t=l[i];return typeof t=="string"?t:""});return{globalFilter:c?C??"":void 0,onGlobalFilterChange:c?t=>{const s=typeof t=="function"?t(C??""):t,n=k?s.trim():s;A(n),p({search:o=>({...o,[d]:void 0,[i]:n||void 0})})}:void 0,columnFilters:j,onColumnFiltersChange:t=>{const s=typeof t=="function"?t(j):t;w(s);const n={};for(const o of f){const a=s.find(m=>m.id===o.columnId),z=o.serialize??(m=>m);if(o.type==="string"){const m=typeof a?.value=="string"?a.value:"";n[o.searchKey]=m.trim()!==""?z(m):void 0}else{const m=Array.isArray(a?.value)?a.value:[];n[o.searchKey]=m.length>0?z(m):void 0}}p({search:o=>({...o,[d]:void 0,...n})})},pagination:S,onPaginationChange:M,ensurePageInRange:(t,s={resetTo:"first"})=>{const n=l[d],o=typeof n=="number"?n:g;t>0&&o>t&&p({replace:!0,search:a=>({...a,[d]:s.resetTo==="last"?t:void 0})})}}}function re({table:x,entityName:l,children:p}){const r=x.getFilteredSelectedRowModel().rows.length,f=y.useRef(null),[d,h]=y.useState("");y.useEffect(()=>{if(r>0){const i=`${r} ${l}${r>1?"s":""} selected. Bulk actions toolbar is available.`;h(i);const c=setTimeout(()=>h(""),3e3);return()=>clearTimeout(c)}},[r,l]);const g=()=>{x.resetRowSelection()},v=i=>{const c=f.current?.querySelectorAll("button");if(!c)return;const k=Array.from(c).findIndex(u=>u===document.activeElement);switch(i.key){case"ArrowRight":{i.preventDefault();const u=(k+1)%c.length;c[u]?.focus();break}case"ArrowLeft":{i.preventDefault();const u=k===0?c.length-1:k-1;c[u]?.focus();break}case"Home":i.preventDefault(),c[0]?.focus();break;case"End":i.preventDefault(),c[c.length-1]?.focus();break;case"Escape":{const u=i.target,j=document.activeElement,w=u?.getAttribute("data-slot")==="dropdown-menu-trigger"||j?.getAttribute("data-slot")==="dropdown-menu-trigger"||u?.closest('[data-slot="dropdown-menu-trigger"]')||j?.closest('[data-slot="dropdown-menu-trigger"]'),S=j?.closest('[data-slot="dropdown-menu-content"]')||u?.closest('[data-slot="dropdown-menu-content"]');if(w||S)return;i.preventDefault(),g();break}}};return r===0?null:e.jsxs(e.Fragment,{children:[e.jsx("div",{"aria-live":"polite","aria-atomic":"true",className:"sr-only",role:"status",children:d}),e.jsx("div",{ref:f,role:"toolbar","aria-label":`Bulk actions for ${r} selected ${l}${r>1?"s":""}`,"aria-describedby":"bulk-actions-description",tabIndex:-1,onKeyDown:v,className:F("fixed bottom-6 left-1/2 z-50 -translate-x-1/2 rounded-xl","transition-all delay-100 duration-300 ease-out hover:scale-105","focus-visible:ring-ring/50 focus-visible:ring-2 focus-visible:outline-none"),children:e.jsxs("div",{className:F("p-2 shadow-xl","rounded-xl border","bg-background/95 supports-[backdrop-filter]:bg-background/60 backdrop-blur-lg","flex items-center gap-x-2"),children:[e.jsxs(G,{children:[e.jsx(L,{asChild:!0,children:e.jsxs(D,{variant:"outline",size:"icon",onClick:g,className:"size-6 rounded-full","aria-label":"Clear selection",title:"Clear selection (Escape)",children:[e.jsx(q,{}),e.jsx("span",{className:"sr-only",children:"Clear selection"})]})}),e.jsx(_,{children:e.jsx("p",{children:"Clear selection (Escape)"})})]}),e.jsx(T,{className:"h-5",orientation:"vertical","aria-hidden":"true"}),e.jsxs("div",{className:"flex items-center gap-x-1 text-sm",id:"bulk-actions-description",children:[e.jsx(B,{variant:"default",className:"min-w-8 rounded-lg","aria-label":`${r} selected`,children:r})," ",e.jsxs("span",{className:"hidden sm:inline",children:[l,r>1?"s":""]})," ","selected"]}),e.jsx(T,{className:"h-5",orientation:"vertical","aria-hidden":"true"}),p]})})]})}export{re as D,ne as S,oe as T,ae as u};
