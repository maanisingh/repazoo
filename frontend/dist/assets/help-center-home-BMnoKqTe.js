import{c as v,T as $,V as R,j as t,n as F,B as T}from"./index-Ddobsr3m.js";import{u as N}from"./useQuery-DoI_LtXo.js";import{C as S,a as A,b as C,d as L,c as b}from"./card-CYxOe6Sh.js";import{B as k}from"./badge-DcyDFdEW.js";import{S as B,a as M,L as z}from"./scroll-area-xR0HY-lK.js";import{L as O}from"./loader-circle-CE1cpmjD.js";import{T as V}from"./twitter-BNjjeVaS.js";import{T as E}from"./trending-up-DtwuSNa4.js";/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U=[["path",{d:"m18 16 4-4-4-4",key:"1inbqp"}],["path",{d:"m6 8-4 4 4 4",key:"15zrgr"}],["path",{d:"m14.5 4-5 16",key:"e7oirm"}]],D=v("code-xml",U);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J=[["path",{d:"M4.5 16.5c-1.5 1.26-2 5-2 5s3.74-.5 5-2c.71-.84.7-2.13-.09-2.91a2.18 2.18 0 0 0-2.91-.09z",key:"m3kijz"}],["path",{d:"m12 15-3-3a22 22 0 0 1 2-3.95A12.88 12.88 0 0 1 22 2c0 2.72-.78 7.5-6 11a22.35 22.35 0 0 1-4 2z",key:"1fmvmk"}],["path",{d:"M9 12H4s.55-3.03 2-4c1.62-1.08 5 0 5 0",key:"1f8sc4"}],["path",{d:"M12 15v5s3.03-.55 4-2c1.08-1.62 0-5 0-5",key:"qeys4"}]],K=v("rocket",J);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G=[["path",{d:"M3 7V5a2 2 0 0 1 2-2h2",key:"aa7l1z"}],["path",{d:"M17 3h2a2 2 0 0 1 2 2v2",key:"4qcy5o"}],["path",{d:"M21 17v2a2 2 0 0 1-2 2h-2",key:"6vwrx8"}],["path",{d:"M7 21H5a2 2 0 0 1-2-2v-2",key:"ioqczr"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}],["path",{d:"m16 16-1.9-1.9",key:"1dq9hf"}]],X=v("scan-search",G);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],Y=v("star",W);function Z(a,r){let e;try{e=a()}catch{return}return{getItem:c=>{var i;const u=n=>n===null?null:JSON.parse(n,void 0),h=(i=e.getItem(c))!=null?i:null;return h instanceof Promise?h.then(u):u(h)},setItem:(c,i)=>e.setItem(c,JSON.stringify(i,void 0)),removeItem:c=>e.removeItem(c)}}const I=a=>r=>{try{const e=a(r);return e instanceof Promise?e:{then(s){return I(s)(e)},catch(s){return this}}}catch(e){return{then(s){return this},catch(s){return I(s)(e)}}}},ee=(a,r)=>(e,s,c)=>{let i={storage:Z(()=>localStorage),partialize:o=>o,version:0,merge:(o,y)=>({...y,...o}),...r},u=!1;const h=new Set,n=new Set;let m=i.storage;if(!m)return a((...o)=>{console.warn(`[zustand persist middleware] Unable to update item '${i.name}', the given storage is currently unavailable.`),e(...o)},s,c);const j=()=>{const o=i.partialize({...s()});return m.setItem(i.name,{state:o,version:i.version})},P=c.setState;c.setState=(o,y)=>(P(o,y),j());const x=a((...o)=>(e(...o),j()),s,c);c.getInitialState=()=>x;let g;const H=()=>{var o,y;if(!m)return;u=!1,h.forEach(l=>{var p;return l((p=s())!=null?p:x)});const f=((y=i.onRehydrateStorage)==null?void 0:y.call(i,(o=s())!=null?o:x))||void 0;return I(m.getItem.bind(m))(i.name).then(l=>{if(l)if(typeof l.version=="number"&&l.version!==i.version){if(i.migrate){const p=i.migrate(l.state,l.version);return p instanceof Promise?p.then(w=>[!0,w]):[!0,p]}console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,l.state];return[!1,void 0]}).then(l=>{var p;const[w,Q]=l;if(g=i.merge(Q,(p=s())!=null?p:x),e(g,!0),w)return j()}).then(()=>{f?.(g,void 0),g=s(),u=!0,n.forEach(l=>l(g))}).catch(l=>{f?.(void 0,l)})};return c.persist={setOptions:o=>{i={...i,...o},o.storage&&(m=o.storage)},clearStorage:()=>{m?.removeItem(i.name)},getOptions:()=>i,rehydrate:()=>H(),hasHydrated:()=>u,onHydrate:o=>(h.add(o),()=>{h.delete(o)}),onFinishHydration:o=>(n.add(o),()=>{n.delete(o)})},i.skipHydration||H(),g||x},te=ee;function q(){return`session_${Date.now()}_${Math.random().toString(36).substring(2,15)}`}const re=$()(te((a,r)=>({isOpen:!1,openHelpCenter:()=>a({isOpen:!0}),closeHelpCenter:()=>a({isOpen:!1}),toggleHelpCenter:()=>a(e=>({isOpen:!e.isOpen})),currentView:"home",currentCategorySlug:null,currentArticleSlug:null,searchQuery:"",navigateToHome:()=>{const e=r();a({currentView:"home",currentCategorySlug:null,currentArticleSlug:null,searchQuery:"",history:[...e.history,{view:"home"}]})},navigateToCategory:e=>{const s=r();a({currentView:"category",currentCategorySlug:e,currentArticleSlug:null,searchQuery:"",history:[...s.history,{view:"category",categorySlug:e}]})},navigateToArticle:e=>{const s=r();a({currentView:"article",currentArticleSlug:e,searchQuery:"",history:[...s.history,{view:"article",articleSlug:e}]}),s.addRecentArticle(e)},navigateToSearch:e=>{const s=r();a({currentView:"search",searchQuery:e,currentCategorySlug:null,currentArticleSlug:null,history:[...s.history,{view:"search",searchQuery:e}]})},setSearchQuery:e=>{a({searchQuery:e})},goBack:()=>{const e=r();if(e.history.length>1){const s=[...e.history];s.pop();const c=s[s.length-1];a({currentView:c.view,currentCategorySlug:c.categorySlug||null,currentArticleSlug:c.articleSlug||null,searchQuery:c.searchQuery||"",history:s})}else a({currentView:"home",currentCategorySlug:null,currentArticleSlug:null,searchQuery:"",history:[{view:"home"}]})},history:[{view:"home"}],sessionId:q(),generateSessionId:()=>a({sessionId:q()}),recentArticles:[],addRecentArticle:e=>{const s=r(),c=[e,...s.recentArticles.filter(i=>i!==e)].slice(0,5);a({recentArticles:c})}}),{name:"help-center-storage",partialize:a=>({sessionId:a.sessionId,recentArticles:a.recentArticles})})),se="https://cfy.repazoo.com/api",d=R.create({baseURL:`${se}/help`,timeout:1e4,headers:{"Content-Type":"application/json"}});d.interceptors.request.use(a=>{const r=localStorage.getItem("help-session-id");return r&&(a.headers["x-session-id"]=r),a});class ae{async getAllCategories(){return(await d.get("/categories")).data.categories}async getCategoryBySlug(r){return(await d.get(`/categories/${r}`)).data.category}async getAllArticles(r,e){const s={};return r!==void 0&&(s.category_id=String(r)),e!==void 0&&(s.featured=String(e)),(await d.get("/articles",{params:s})).data.articles}async getArticleBySlug(r){const e=await d.get(`/articles/${r}`);return{article:e.data.article,relatedArticles:e.data.related_articles}}async getPopularArticles(r=10){return(await d.get("/articles/popular",{params:{limit:r}})).data.articles}async getFeaturedArticles(r=5){return(await d.get("/articles/featured",{params:{limit:r}})).data.articles}async searchArticles(r,e=20){return(await d.get("/search",{params:{q:r,limit:e}})).data.articles}async getPopularSearches(r=10){return(await d.get("/search/popular",{params:{limit:r}})).data.searches}async trackArticleView(r,e){await d.post(`/articles/${r}/view`,{time_spent_seconds:e||0})}async submitArticleFeedback(r,e,s){await d.post(`/articles/${r}/feedback`,{is_helpful:e,feedback_text:s})}async createArticle(r){return(await d.post("/articles",r)).data.article}async updateArticle(r,e){return(await d.put(`/articles/${r}`,e)).data.article}}const _=new ae,ne={Rocket:K,Twitter:V,ScanSearch:X,LayoutDashboard:z,ShieldCheck:M,Code2:D,AlertCircle:F};function pe(){const{navigateToCategory:a,navigateToArticle:r}=re(),{data:e,isLoading:s}=N({queryKey:["help-categories"],queryFn:()=>_.getAllCategories()}),{data:c,isLoading:i}=N({queryKey:["help-popular-articles"],queryFn:()=>_.getPopularArticles(5)}),{data:u,isLoading:h}=N({queryKey:["help-featured-articles"],queryFn:()=>_.getFeaturedArticles(3)});return s?t.jsx("div",{className:"flex items-center justify-center h-full",children:t.jsx(O,{className:"h-8 w-8 animate-spin text-muted-foreground"})}):t.jsx(B,{className:"flex-1 p-6",children:t.jsxs("div",{className:"max-w-6xl mx-auto space-y-8",children:[t.jsxs("div",{className:"text-center space-y-2",children:[t.jsx("h2",{className:"text-3xl font-bold",children:"How can we help you?"}),t.jsx("p",{className:"text-muted-foreground text-lg",children:"Browse categories or search for what you need"})]}),t.jsxs("div",{children:[t.jsx("h3",{className:"text-xl font-semibold mb-4",children:"Browse by Category"}),t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:e?.map(n=>{const m=ne[n.icon||"AlertCircle"]||F;return t.jsxs(S,{className:"cursor-pointer hover:border-primary transition-colors",onClick:()=>a(n.slug),children:[t.jsx(A,{className:"pb-3",children:t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:"p-2 rounded-lg bg-primary/10",children:t.jsx(m,{className:"h-5 w-5 text-primary"})}),t.jsxs("div",{className:"flex-1",children:[t.jsx(C,{className:"text-base",children:n.name}),n.article_count&&parseInt(n.article_count)>0&&t.jsxs(k,{variant:"secondary",className:"text-xs mt-1",children:[n.article_count," articles"]})]})]})}),t.jsx(L,{className:"pb-4",children:t.jsx(b,{className:"text-sm",children:n.description})})]},n.id)})})]}),!i&&c&&c.length>0&&t.jsxs("div",{children:[t.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[t.jsx(E,{className:"h-5 w-5 text-primary"}),t.jsx("h3",{className:"text-xl font-semibold",children:"Popular Articles"})]}),t.jsx("div",{className:"space-y-2",children:c.map(n=>t.jsx(S,{className:"cursor-pointer hover:border-primary transition-colors",onClick:()=>r(n.slug),children:t.jsx(A,{className:"py-3 px-4",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"flex-1",children:[t.jsx(C,{className:"text-sm font-medium",children:n.title}),n.category_name&&t.jsx(b,{className:"text-xs mt-1",children:n.category_name})]}),t.jsxs(k,{variant:"outline",className:"text-xs ml-2",children:[n.view_count," views"]})]})})},n.id))})]}),!h&&u&&u.length>0&&t.jsxs("div",{children:[t.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[t.jsx(Y,{className:"h-5 w-5 text-primary"}),t.jsx("h3",{className:"text-xl font-semibold",children:"Featured Guides"})]}),t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:u.map(n=>t.jsxs(S,{className:"cursor-pointer hover:border-primary transition-colors",onClick:()=>r(n.slug),children:[t.jsxs(A,{children:[t.jsx(k,{className:"w-fit mb-2",variant:"default",children:"Featured"}),t.jsx(C,{className:"text-base",children:n.title}),t.jsx(b,{className:"text-sm line-clamp-2",children:n.description})]}),t.jsx(L,{className:"pt-0",children:t.jsx(T,{variant:"ghost",size:"sm",className:"px-0",children:"Read more →"})})]},n.id))})]}),t.jsx("div",{className:"border-t pt-6",children:t.jsxs("p",{className:"text-sm text-muted-foreground text-center",children:["Can't find what you're looking for?"," ",t.jsx(T,{variant:"link",className:"px-1 h-auto text-sm",onClick:()=>document.querySelector('input[type="search"]')?.focus(),children:"Try searching"})]})})]})})}export{pe as H,_ as h,re as u};
