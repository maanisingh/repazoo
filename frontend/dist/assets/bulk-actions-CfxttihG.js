import{c as D,j as e,d as F,r as y,B as P}from"./index-H4DaqSpq.js";import{e as E}from"./form-BCfhzYnC.js";import{S as K,a as R,b as M,c as B,d as N}from"./select-CVlxWidq.js";import{B as $}from"./badge-pi7sX806.js";import{S as I}from"./separator-DONs4C7t.js";import{T as G,F as L,G as q}from"./sign-out-dialog-hk5uccCc.js";import{X as _}from"./index-EzDm0lmA.js";/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H=[["path",{d:"M12 2v4",key:"3427ic"}],["path",{d:"m16.2 7.8 2.9-2.9",key:"r700ao"}],["path",{d:"M18 12h4",key:"wj9ykh"}],["path",{d:"m16.2 16.2 2.9 2.9",key:"1bxg5t"}],["path",{d:"M12 18v4",key:"jadmvz"}],["path",{d:"m4.9 19.1 2.9-2.9",key:"bwix9q"}],["path",{d:"M2 12h4",key:"j09sii"}],["path",{d:"m4.9 4.9 2.9 2.9",key:"giyufr"}]],U=D("loader",H);function se({defaultValue:x,onValueChange:l,isPending:f,items:b,placeholder:r,disabled:p,className:d="",isControlled:h=!1}){const g=h?{value:x,onValueChange:l}:{defaultValue:x,onValueChange:l};return e.jsxs(K,{...g,children:[e.jsx(E,{children:e.jsx(R,{disabled:p,className:F(d),children:e.jsx(M,{placeholder:r??"Select"})})}),e.jsx(B,{children:f?e.jsx(N,{disabled:!0,value:"loading",className:"h-14",children:e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx(U,{className:"h-5 w-5 animate-spin"}),"  ","Loading..."]})}):b?.map(({label:v,value:i})=>e.jsx(N,{value:i,children:v},i))})]})}function ne(x){const{search:l,navigate:f,pagination:b,globalFilter:r,columnFilters:p=[]}=x,d=b?.pageKey??"page",h=b?.pageSizeKey??"pageSize",g=b?.defaultPage??1,v=b?.defaultPageSize??10,i=r?.key??"filter",c=r?.enabled??!0,S=r?.trim??!0,u=y.useMemo(()=>{const t=[];for(const s of p){const o=l[s.searchKey],n=s.deserialize??(a=>a);if(s.type==="string"){const a=n(o)??"";typeof a=="string"&&a.trim()!==""&&t.push({id:s.columnId,value:a})}else{const a=n(o)??[];Array.isArray(a)&&a.length>0&&t.push({id:s.columnId,value:a})}}return t},[p,l]),[j,k]=y.useState(u),w=y.useMemo(()=>{const t=l[d],s=l[h],o=typeof t=="number"?t:g,n=typeof s=="number"?s:v;return{pageIndex:Math.max(0,o-1),pageSize:n}},[l,d,h,g,v]),T=t=>{const s=typeof t=="function"?t(w):t,o=s.pageIndex+1,n=s.pageSize;f({search:a=>({...a,[d]:o<=g?void 0:o,[h]:n===v?void 0:n})})},[C,A]=y.useState(()=>{if(!c)return;const t=l[i];return typeof t=="string"?t:""});return{globalFilter:c?C??"":void 0,onGlobalFilterChange:c?t=>{const s=typeof t=="function"?t(C??""):t,o=S?s.trim():s;A(o),f({search:n=>({...n,[d]:void 0,[i]:o||void 0})})}:void 0,columnFilters:j,onColumnFiltersChange:t=>{const s=typeof t=="function"?t(j):t;k(s);const o={};for(const n of p){const a=s.find(m=>m.id===n.columnId),z=n.serialize??(m=>m);if(n.type==="string"){const m=typeof a?.value=="string"?a.value:"";o[n.searchKey]=m.trim()!==""?z(m):void 0}else{const m=Array.isArray(a?.value)?a.value:[];o[n.searchKey]=m.length>0?z(m):void 0}}f({search:n=>({...n,[d]:void 0,...o})})},pagination:w,onPaginationChange:T,ensurePageInRange:(t,s={resetTo:"first"})=>{const o=l[d],n=typeof o=="number"?o:g;t>0&&n>t&&f({replace:!0,search:a=>({...a,[d]:s.resetTo==="last"?t:void 0})})}}}function oe({table:x,entityName:l,children:f}){const r=x.getFilteredSelectedRowModel().rows.length,p=y.useRef(null),[d,h]=y.useState("");y.useEffect(()=>{if(r>0){const i=`${r} ${l}${r>1?"s":""} selected. Bulk actions toolbar is available.`;h(i);const c=setTimeout(()=>h(""),3e3);return()=>clearTimeout(c)}},[r,l]);const g=()=>{x.resetRowSelection()},v=i=>{const c=p.current?.querySelectorAll("button");if(!c)return;const S=Array.from(c).findIndex(u=>u===document.activeElement);switch(i.key){case"ArrowRight":{i.preventDefault();const u=(S+1)%c.length;c[u]?.focus();break}case"ArrowLeft":{i.preventDefault();const u=S===0?c.length-1:S-1;c[u]?.focus();break}case"Home":i.preventDefault(),c[0]?.focus();break;case"End":i.preventDefault(),c[c.length-1]?.focus();break;case"Escape":{const u=i.target,j=document.activeElement,k=u?.getAttribute("data-slot")==="dropdown-menu-trigger"||j?.getAttribute("data-slot")==="dropdown-menu-trigger"||u?.closest('[data-slot="dropdown-menu-trigger"]')||j?.closest('[data-slot="dropdown-menu-trigger"]'),w=j?.closest('[data-slot="dropdown-menu-content"]')||u?.closest('[data-slot="dropdown-menu-content"]');if(k||w)return;i.preventDefault(),g();break}}};return r===0?null:e.jsxs(e.Fragment,{children:[e.jsx("div",{"aria-live":"polite","aria-atomic":"true",className:"sr-only",role:"status",children:d}),e.jsx("div",{ref:p,role:"toolbar","aria-label":`Bulk actions for ${r} selected ${l}${r>1?"s":""}`,"aria-describedby":"bulk-actions-description",tabIndex:-1,onKeyDown:v,className:F("fixed bottom-6 left-1/2 z-50 -translate-x-1/2 rounded-xl","transition-all delay-100 duration-300 ease-out hover:scale-105","focus-visible:ring-ring/50 focus-visible:ring-2 focus-visible:outline-none"),children:e.jsxs("div",{className:F("p-2 shadow-xl","rounded-xl border","bg-background/95 supports-[backdrop-filter]:bg-background/60 backdrop-blur-lg","flex items-center gap-x-2"),children:[e.jsxs(G,{children:[e.jsx(L,{asChild:!0,children:e.jsxs(P,{variant:"outline",size:"icon",onClick:g,className:"size-6 rounded-full","aria-label":"Clear selection",title:"Clear selection (Escape)",children:[e.jsx(_,{}),e.jsx("span",{className:"sr-only",children:"Clear selection"})]})}),e.jsx(q,{children:e.jsx("p",{children:"Clear selection (Escape)"})})]}),e.jsx(I,{className:"h-5",orientation:"vertical","aria-hidden":"true"}),e.jsxs("div",{className:"flex items-center gap-x-1 text-sm",id:"bulk-actions-description",children:[e.jsx($,{variant:"default",className:"min-w-8 rounded-lg","aria-label":`${r} selected`,children:r})," ",e.jsxs("span",{className:"hidden sm:inline",children:[l,r>1?"s":""]})," ","selected"]}),e.jsx(I,{className:"h-5",orientation:"vertical","aria-hidden":"true"}),f]})})]})}export{oe as D,se as S,ne as u};
