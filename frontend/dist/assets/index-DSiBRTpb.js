import{c as L,b as E,v as H,r as d,t as g,j as e,B as h}from"./index-H4DaqSpq.js";import{u as B}from"./useQuery-Rv5Od9FD.js";import{u as P}from"./useMutation-wEDAY8qW.js";import{C as $,a as q,b as z,c as O,d as I}from"./card-C0ZjAVn9.js";import{B as r}from"./badge-pi7sX806.js";import{S as f,a as w,b as v,c as N,d as s}from"./select-CVlxWidq.js";import{T as Q,a as V,b as y,c as a,d as K,e as i}from"./table-CG2oaRXa.js";import{Y,Z as J,_ as Z,$ as G,a0 as U,a1 as W,a2 as X,a3 as ee}from"./sign-out-dialog-hk5uccCc.js";import{H as te,T as se,P as re}from"./theme-switch-C5tdu85W.js";import{M as ae}from"./main-D5uzAE8u.js";import{S as ie,C as ne}from"./search-DeIJKnzn.js";import{R as le}from"./refresh-cw-CEViQTj1.js";import{L as C}from"./loader-circle-5YA-BuFT.js";import{C as oe}from"./circle-check-BLnpqHR7.js";import{E as ce}from"./external-link-Bg2vGJkm.js";import{T as de}from"./trash-2-DP13TDBf.js";import"./index-BdQq_4o_.js";import"./index-D1IO__54.js";import"./index-BVj6NEvJ.js";import"./index-DG8OgmhZ.js";import"./index-CZMQeqyZ.js";import"./index-DOV0-nUu.js";import"./index-CQiHdsHp.js";import"./index-hI_Qe1FL.js";import"./index-BTLX_OZX.js";import"./index-D8QmCQ3_.js";import"./index-DAIdUsKU.js";import"./chevron-down-gc8dYoSV.js";import"./check-s5UCxJch.js";import"./chevron-up-B8exOOsA.js";import"./index-EzDm0lmA.js";import"./index-DIPJ9e2F.js";import"./index-DTAvTyP8.js";import"./chevron-right-BARXRStm.js";import"./separator-DONs4C7t.js";import"./index-D0zLoMui.js";import"./search-provider-BrsfzY6n.js";import"./command-D6Zdrqg1.js";import"./dialog-BUsDf1C4.js";import"./scroll-area-B7G2E8-s.js";import"./shield-alert-DNCMqb7A.js";/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const me=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],xe=L("funnel",me);function he(){const{auth:T}=E(),c=T.user?.accountNo||"",k=H(),[n,b]=d.useState("all"),[l,S]=d.useState("all"),[_,m]=d.useState(!1),[x,u]=d.useState(null),{data:D,isLoading:A,refetch:M}=B({queryKey:["mentions",c,n,l],queryFn:async()=>{let t=`/api/mentions?user_id=${c}&limit=100`;n!=="all"&&(t+=`&risk_level=${n}`),l!=="all"&&(t+=`&sentiment=${l}`);const o=await fetch(t);if(!o.ok)throw new Error("Failed to fetch mentions");return o.json()},enabled:!!c}),j=P({mutationFn:async t=>{const o=await fetch("/api/twitter/delete-tweet",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user_id:c,tweet_id:t})});if(!o.ok)throw new Error("Failed to delete tweet");return o.json()},onSuccess:()=>{g.success("Tweet deleted successfully"),k.invalidateQueries({queryKey:["mentions"]}),m(!1),u(null)},onError:t=>{g.error(t instanceof Error?t.message:"Failed to delete tweet")}}),p=D?.mentions||[],R=t=>{switch(t?.toLowerCase()){case"high":case"critical":return e.jsx(r,{variant:"destructive",children:"High Risk"});case"medium":return e.jsx(r,{variant:"secondary",className:"bg-orange-100 text-orange-800 dark:bg-orange-900 dark:text-orange-200",children:"Medium"});default:return e.jsx(r,{variant:"outline",children:"Low"})}},F=t=>{switch(t?.toLowerCase()){case"negative":return e.jsx(r,{variant:"outline",className:"border-red-500 text-red-500",children:"Negative"});case"positive":return e.jsx(r,{variant:"outline",className:"border-green-500 text-green-500",children:"Positive"});default:return e.jsx(r,{variant:"outline",children:"Neutral"})}};return e.jsxs(e.Fragment,{children:[e.jsx(te,{children:e.jsxs("div",{className:"ms-auto flex items-center space-x-4",children:[e.jsx(ie,{}),e.jsx(se,{}),e.jsx(ne,{}),e.jsx(re,{})]})}),e.jsx(ae,{children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Mentions Management"}),e.jsx("p",{className:"text-muted-foreground mt-1",children:"Monitor and manage your Twitter mentions to protect your reputation"})]}),e.jsxs($,{children:[e.jsxs(q,{children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(z,{children:"Your Twitter Mentions"}),e.jsx(O,{children:"Mentions that may impact your reputation - Review and take action"})]}),e.jsxs(h,{onClick:()=>M(),variant:"outline",size:"sm",children:[e.jsx(le,{className:"h-4 w-4 mr-2"}),"Refresh"]})]}),e.jsxs("div",{className:"flex gap-3 pt-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(xe,{className:"h-4 w-4 text-muted-foreground"}),e.jsxs(f,{value:n,onValueChange:b,children:[e.jsx(w,{className:"w-[150px]",children:e.jsx(v,{placeholder:"Risk Level"})}),e.jsxs(N,{children:[e.jsx(s,{value:"all",children:"All Risks"}),e.jsx(s,{value:"high",children:"High Risk"}),e.jsx(s,{value:"medium",children:"Medium Risk"}),e.jsx(s,{value:"low",children:"Low Risk"})]})]})]}),e.jsxs(f,{value:l,onValueChange:S,children:[e.jsx(w,{className:"w-[150px]",children:e.jsx(v,{placeholder:"Sentiment"})}),e.jsxs(N,{children:[e.jsx(s,{value:"all",children:"All Sentiments"}),e.jsx(s,{value:"negative",children:"Negative"}),e.jsx(s,{value:"neutral",children:"Neutral"}),e.jsx(s,{value:"positive",children:"Positive"})]})]})]})]}),e.jsx(I,{children:A?e.jsx("div",{className:"flex items-center justify-center py-8",children:e.jsx(C,{className:"h-8 w-8 animate-spin text-muted-foreground"})}):p.length===0?e.jsxs("div",{className:"flex flex-col items-center justify-center py-12 text-center",children:[e.jsx(oe,{className:"h-12 w-12 text-green-500 mb-3"}),e.jsx("p",{className:"text-lg font-medium",children:"No Mentions Found"}),e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:n!=="all"||l!=="all"?"Try adjusting your filters":"Run a scan to analyze your Twitter mentions"})]}):e.jsx("div",{className:"rounded-md border",children:e.jsxs(Q,{children:[e.jsx(V,{children:e.jsxs(y,{children:[e.jsx(a,{children:"Author"}),e.jsx(a,{children:"Tweet"}),e.jsx(a,{children:"Risk"}),e.jsx(a,{children:"Sentiment"}),e.jsx(a,{className:"text-right",children:"Engagement"}),e.jsx(a,{className:"text-right",children:"Actions"})]})}),e.jsx(K,{children:p.map(t=>e.jsxs(y,{children:[e.jsx(i,{children:e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"font-medium text-sm",children:t.author_display_name}),e.jsxs("span",{className:"text-xs text-muted-foreground",children:["@",t.author_username]})]})}),e.jsx(i,{className:"max-w-md",children:e.jsx("p",{className:"text-sm line-clamp-2",children:t.tweet_text})}),e.jsx(i,{children:R(t.risk_level)}),e.jsx(i,{children:F(t.sentiment)}),e.jsx(i,{className:"text-right",children:e.jsxs("div",{className:"flex items-center justify-end gap-2 text-xs text-muted-foreground",children:[e.jsxs("span",{children:["â¤ï¸ ",t.like_count]}),e.jsxs("span",{children:["ðŸ” ",t.retweet_count]}),e.jsxs("span",{children:["ðŸ’¬ ",t.reply_count]})]})}),e.jsx(i,{className:"text-right",children:e.jsxs("div",{className:"flex items-center justify-end gap-2",children:[e.jsx(h,{variant:"ghost",size:"sm",asChild:!0,children:e.jsx("a",{href:`https://twitter.com/${t.author_username}/status/${t.tweet_id}`,target:"_blank",rel:"noopener noreferrer",children:e.jsx(ce,{className:"h-4 w-4"})})}),e.jsx(h,{variant:"ghost",size:"sm",onClick:()=>{u(t),m(!0)},children:e.jsx(de,{className:"h-4 w-4 text-red-500"})})]})})]},t.id))})]})})})]})]})}),e.jsx(Y,{open:_,onOpenChange:m,children:e.jsxs(J,{children:[e.jsxs(Z,{children:[e.jsx(G,{children:"Delete Tweet?"}),e.jsxs(U,{children:["This will permanently delete the tweet from Twitter. This action cannot be undone.",e.jsx("div",{className:"mt-4 p-3 rounded-lg bg-muted",children:e.jsx("p",{className:"text-sm",children:x?.tweet_text})})]})]}),e.jsxs(W,{children:[e.jsx(X,{children:"Cancel"}),e.jsx(ee,{onClick:()=>x&&j.mutate(x.tweet_id),className:"bg-red-500 hover:bg-red-600",children:j.isPending?e.jsxs(e.Fragment,{children:[e.jsx(C,{className:"h-4 w-4 mr-2 animate-spin"}),"Deleting..."]}):"Delete Tweet"})]})]})})]})}const tt=he;export{tt as component};
