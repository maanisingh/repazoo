import{c as E,o as z,j as e,B as m,F as he,s as j,r as f,y as Z,t as S,p as F,H as U,I as $,J as ee,E as pe}from"./index-DJ90lmtz.js";import{S as je,C as ge}from"./search-BlpyBJ55.js";import{H as fe,T as be,P as ke}from"./theme-switch-DJ7ajxRk.js";import{M as we}from"./main-Cd8DAdoX.js";import{s as A}from"./show-submitted-data-CnU3oWL5.js";import{I as Ce,J as ye,K as ve,L as Se,M as Ne,N as De,O as Te,n as Re,E as se,D as P,T as N,F as D,f as V,G as T,g as I,j as k,i as K,P as Fe,Q as Me,R as Pe,U as Ve,V as Ie,s as Ee}from"./sign-out-dialog-BOAsJPPQ.js";import{u as te,a as ae,F as le,b as y,c,d,e as x,f as v}from"./form-DM-D-CWZ.js";import{D as ze,a as Ue,b as $e,c as Ae,d as He,e as Oe,f as Be}from"./dialog-DnBiIXzv.js";import{I as H}from"./input-Db_rp8gl.js";import{R as q,a as b}from"./radio-group-BM8-S8z2.js";import{S as Le,D as _e,T as re,u as Ke}from"./bulk-actions-D9En3bFd.js";import{P as qe}from"./plus-I8tbNHUe.js";import{D as R,u as Ge,g as Je,c as We,d as Ye,i as Qe,e as Xe,h as Ze,a as es,f as G,b as ss}from"./toolbar-B4pmHkvY.js";import{T as ts,a as as,b as M,c as ls,d as rs,e as J}from"./table-B8g0Y7Uw.js";import{A as ns,b as os,a as is}from"./alert-CPVLKpxY.js";import{L as cs}from"./label-u8MdU1nj.js";import{T as ds}from"./triangle-alert-Cv4HHgo_.js";import{B as ms}from"./badge-Bj0RyG7G.js";import{C as W}from"./checkbox-BJvcQnEL.js";import{D as us}from"./react-icons.esm-DyA-mN6n.js";import"./index-CJSlC0en.js";import"./index-BxVlSr3S.js";import"./index-CHX5D7g7.js";import"./index-Ca_DM27t.js";import"./index-BrOggFAz.js";import"./index-BZ4b_QVw.js";import"./index-Cl83K5VM.js";import"./index-BjXKqpud.js";import"./index-B89kps67.js";import"./search-provider-B8pFeOMI.js";import"./command-Cn3df8sF.js";import"./index-ZZ7qNseZ.js";import"./index-BmMetlW3.js";import"./shield-alert-DtAEbjqa.js";import"./index-BdQq_4o_.js";import"./chevron-right-DpA5sAkR.js";import"./circle-check-C69RN0UY.js";import"./separator-CthrwTST.js";import"./check-CzAYJCFm.js";import"./index-DQSaeAYD.js";import"./select-CYJUntLO.js";import"./chevron-down-CCM2sUDQ.js";import"./chevron-up-DsKr4mWU.js";import"./popover-CQzIonYt.js";/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xs=[["path",{d:"m21 16-4 4-4-4",key:"f6ql7i"}],["path",{d:"M17 20V4",key:"1ejh1v"}],["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}]],hs=E("arrow-up-down",xs);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ps=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m16 12-4-4-4 4",key:"177agl"}],["path",{d:"M12 16V8",key:"1sbj14"}]],js=E("circle-arrow-up",ps);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gs=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],ne=E("download",gs),fs=z({file:he(FileList).refine(s=>s.length>0,{message:"Please upload a file"}).refine(s=>["text/csv"].includes(s?.[0]?.type),"Please upload csv format.")});function bs({open:s,onOpenChange:t}){const a=te({resolver:ae(fs),defaultValues:{file:void 0}}),r=a.register("file"),n=()=>{const i=a.getValues("file");if(i&&i[0]){const o={name:i[0].name,size:i[0].size,type:i[0].type};A(o,"You have imported the following file:")}t(!1)};return e.jsx(ze,{open:s,onOpenChange:i=>{t(i),a.reset()},children:e.jsxs(Ue,{className:"gap-2 sm:max-w-sm",children:[e.jsxs($e,{className:"text-start",children:[e.jsx(Ae,{children:"Import Tasks"}),e.jsx(He,{children:"Import tasks quickly from a CSV file."})]}),e.jsx(le,{...a,children:e.jsx("form",{id:"task-import-form",onSubmit:a.handleSubmit(n),children:e.jsx(y,{control:a.control,name:"file",render:()=>e.jsxs(c,{className:"my-2",children:[e.jsx(d,{children:"File"}),e.jsx(x,{children:e.jsx(H,{type:"file",...r,className:"h-8 py-0"})}),e.jsx(v,{})]})})})}),e.jsxs(Oe,{className:"gap-2",children:[e.jsx(Be,{asChild:!0,children:e.jsx(m,{variant:"outline",children:"Close"})}),e.jsx(m,{type:"submit",form:"task-import-form",children:"Import"})]})]})})}const ks=z({title:j().min(1,"Title is required."),status:j().min(1,"Please select a status."),label:j().min(1,"Please select a label."),priority:j().min(1,"Please choose a priority.")});function Y({open:s,onOpenChange:t,currentRow:a}){const r=!!a,n=te({resolver:ae(ks),defaultValues:a??{title:"",status:"",label:"",priority:""}}),i=o=>{t(!1),n.reset(),A(o)};return e.jsx(Ce,{open:s,onOpenChange:o=>{t(o),n.reset()},children:e.jsxs(ye,{className:"flex flex-col",children:[e.jsxs(ve,{className:"text-start",children:[e.jsxs(Se,{children:[r?"Update":"Create"," Task"]}),e.jsxs(Ne,{children:[r?"Update the task by providing necessary info.":"Add a new task by providing necessary info.","Click save when you're done."]})]}),e.jsx(le,{...n,children:e.jsxs("form",{id:"tasks-form",onSubmit:n.handleSubmit(i),className:"flex-1 space-y-6 overflow-y-auto px-4",children:[e.jsx(y,{control:n.control,name:"title",render:({field:o})=>e.jsxs(c,{children:[e.jsx(d,{children:"Title"}),e.jsx(x,{children:e.jsx(H,{...o,placeholder:"Enter a title"})}),e.jsx(v,{})]})}),e.jsx(y,{control:n.control,name:"status",render:({field:o})=>e.jsxs(c,{children:[e.jsx(d,{children:"Status"}),e.jsx(Le,{defaultValue:o.value,onValueChange:o.onChange,placeholder:"Select dropdown",items:[{label:"In Progress",value:"in progress"},{label:"Backlog",value:"backlog"},{label:"Todo",value:"todo"},{label:"Canceled",value:"canceled"},{label:"Done",value:"done"}]}),e.jsx(v,{})]})}),e.jsx(y,{control:n.control,name:"label",render:({field:o})=>e.jsxs(c,{className:"relative",children:[e.jsx(d,{children:"Label"}),e.jsx(x,{children:e.jsxs(q,{onValueChange:o.onChange,defaultValue:o.value,className:"flex flex-col space-y-1",children:[e.jsxs(c,{className:"flex items-center",children:[e.jsx(x,{children:e.jsx(b,{value:"documentation"})}),e.jsx(d,{className:"font-normal",children:"Documentation"})]}),e.jsxs(c,{className:"flex items-center",children:[e.jsx(x,{children:e.jsx(b,{value:"feature"})}),e.jsx(d,{className:"font-normal",children:"Feature"})]}),e.jsxs(c,{className:"flex items-center",children:[e.jsx(x,{children:e.jsx(b,{value:"bug"})}),e.jsx(d,{className:"font-normal",children:"Bug"})]})]})}),e.jsx(v,{})]})}),e.jsx(y,{control:n.control,name:"priority",render:({field:o})=>e.jsxs(c,{className:"relative",children:[e.jsx(d,{children:"Priority"}),e.jsx(x,{children:e.jsxs(q,{onValueChange:o.onChange,defaultValue:o.value,className:"flex flex-col space-y-1",children:[e.jsxs(c,{className:"flex items-center",children:[e.jsx(x,{children:e.jsx(b,{value:"high"})}),e.jsx(d,{className:"font-normal",children:"High"})]}),e.jsxs(c,{className:"flex items-center",children:[e.jsx(x,{children:e.jsx(b,{value:"medium"})}),e.jsx(d,{className:"font-normal",children:"Medium"})]}),e.jsxs(c,{className:"flex items-center",children:[e.jsx(x,{children:e.jsx(b,{value:"low"})}),e.jsx(d,{className:"font-normal",children:"Low"})]})]})}),e.jsx(v,{})]})})]})}),e.jsxs(De,{className:"gap-2",children:[e.jsx(Te,{asChild:!0,children:e.jsx(m,{variant:"outline",children:"Close"})}),e.jsx(m,{form:"tasks-form",type:"submit",children:"Save changes"})]})]})})}const oe=Z.createContext(null);function ws({children:s}){const[t,a]=Re(null),[r,n]=f.useState(null);return e.jsx(oe,{value:{open:t,setOpen:a,currentRow:r,setCurrentRow:n},children:s})}const O=()=>{const s=Z.useContext(oe);if(!s)throw new Error("useTasks has to be used within <TasksContext>");return s};function Cs(){const{open:s,setOpen:t,currentRow:a,setCurrentRow:r}=O();return e.jsxs(e.Fragment,{children:[e.jsx(Y,{open:s==="create",onOpenChange:()=>t("create")},"task-create"),e.jsx(bs,{open:s==="import",onOpenChange:()=>t("import")},"tasks-import"),a&&e.jsxs(e.Fragment,{children:[e.jsx(Y,{open:s==="update",onOpenChange:()=>{t("update"),setTimeout(()=>{r(null)},500)},currentRow:a},`task-update-${a.id}`),e.jsx(se,{destructive:!0,open:s==="delete",onOpenChange:()=>{t("delete"),setTimeout(()=>{r(null)},500)},handleConfirm:()=>{t(null),setTimeout(()=>{r(null)},500),A(a,"The following task has been deleted:")},className:"max-w-md",title:`Delete this task: ${a.id} ?`,desc:e.jsxs(e.Fragment,{children:["You are about to delete a task with the ID"," ",e.jsx("strong",{children:a.id}),". ",e.jsx("br",{}),"This action cannot be undone."]}),confirmText:"Delete"},"task-delete")]})]})}function ys(){const{setOpen:s}=O();return e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(m,{variant:"outline",className:"space-x-1",onClick:()=>s("import"),children:[e.jsx("span",{children:"Import"})," ",e.jsx(ne,{size:18})]}),e.jsxs(m,{className:"space-x-1",onClick:()=>s("create"),children:[e.jsx("span",{children:"Create"})," ",e.jsx(qe,{size:18})]})]})}const C="DELETE";function vs({open:s,onOpenChange:t,table:a}){const[r,n]=f.useState(""),i=a.getFilteredSelectedRowModel().rows,o=()=>{if(r.trim()!==C){S.error(`Please type "${C}" to confirm.`);return}t(!1),S.promise(F(2e3),{loading:"Deleting tasks...",success:()=>(a.resetRowSelection(),`Deleted ${i.length} ${i.length>1?"tasks":"task"}`),error:"Error"})};return e.jsx(se,{open:s,onOpenChange:t,handleConfirm:o,disabled:r.trim()!==C,title:e.jsxs("span",{className:"text-destructive",children:[e.jsx(ds,{className:"stroke-destructive me-1 inline-block",size:18})," ","Delete ",i.length," ",i.length>1?"tasks":"task"]}),desc:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("p",{className:"mb-2",children:["Are you sure you want to delete the selected tasks? ",e.jsx("br",{}),"This action cannot be undone."]}),e.jsxs(cs,{className:"my-4 flex flex-col items-start gap-1.5",children:[e.jsxs("span",{className:"",children:['Confirm by typing "',C,'":']}),e.jsx(H,{value:r,onChange:l=>n(l.target.value),placeholder:`Type "${C}" to confirm.`})]}),e.jsxs(ns,{variant:"destructive",children:[e.jsx(os,{children:"Warning!"}),e.jsx(is,{children:"Please be careful, this operation can not be rolled back."})]})]}),confirmText:"Delete",destructive:!0})}function Ss({table:s}){const[t,a]=f.useState(!1),r=s.getFilteredSelectedRowModel().rows,n=l=>{const h=r.map(w=>w.original);S.promise(F(2e3),{loading:"Updating status...",success:()=>(s.resetRowSelection(),`Status updated to "${l}" for ${h.length} task${h.length>1?"s":""}.`),error:"Error"}),s.resetRowSelection()},i=l=>{const h=r.map(w=>w.original);S.promise(F(2e3),{loading:"Updating priority...",success:()=>(s.resetRowSelection(),`Priority updated to "${l}" for ${h.length} task${h.length>1?"s":""}.`),error:"Error"}),s.resetRowSelection()},o=()=>{const l=r.map(h=>h.original);S.promise(F(2e3),{loading:"Exporting tasks...",success:()=>(s.resetRowSelection(),`Exported ${l.length} task${l.length>1?"s":""} to CSV.`),error:"Error"}),s.resetRowSelection()};return e.jsxs(e.Fragment,{children:[e.jsxs(_e,{table:s,entityName:"task",children:[e.jsxs(P,{children:[e.jsxs(N,{children:[e.jsx(D,{asChild:!0,children:e.jsx(V,{asChild:!0,children:e.jsxs(m,{variant:"outline",size:"icon",className:"size-8","aria-label":"Update status",title:"Update status",children:[e.jsx(js,{}),e.jsx("span",{className:"sr-only",children:"Update status"})]})})}),e.jsx(T,{children:e.jsx("p",{children:"Update status"})})]}),e.jsx(I,{sideOffset:14,children:U.map(l=>e.jsxs(k,{defaultValue:l.value,onClick:()=>n(l.value),children:[l.icon&&e.jsx(l.icon,{className:"text-muted-foreground size-4"}),l.label]},l.value))})]}),e.jsxs(P,{children:[e.jsxs(N,{children:[e.jsx(D,{asChild:!0,children:e.jsx(V,{asChild:!0,children:e.jsxs(m,{variant:"outline",size:"icon",className:"size-8","aria-label":"Update priority",title:"Update priority",children:[e.jsx(hs,{}),e.jsx("span",{className:"sr-only",children:"Update priority"})]})})}),e.jsx(T,{children:e.jsx("p",{children:"Update priority"})})]}),e.jsx(I,{sideOffset:14,children:$.map(l=>e.jsxs(k,{defaultValue:l.value,onClick:()=>i(l.value),children:[l.icon&&e.jsx(l.icon,{className:"text-muted-foreground size-4"}),l.label]},l.value))})]}),e.jsxs(N,{children:[e.jsx(D,{asChild:!0,children:e.jsxs(m,{variant:"outline",size:"icon",onClick:()=>o(),className:"size-8","aria-label":"Export tasks",title:"Export tasks",children:[e.jsx(ne,{}),e.jsx("span",{className:"sr-only",children:"Export tasks"})]})}),e.jsx(T,{children:e.jsx("p",{children:"Export tasks"})})]}),e.jsxs(N,{children:[e.jsx(D,{asChild:!0,children:e.jsxs(m,{variant:"destructive",size:"icon",onClick:()=>a(!0),className:"size-8","aria-label":"Delete selected tasks",title:"Delete selected tasks",children:[e.jsx(re,{}),e.jsx("span",{className:"sr-only",children:"Delete selected tasks"})]})}),e.jsx(T,{children:e.jsx("p",{children:"Delete selected tasks"})})]})]}),e.jsx(vs,{open:t,onOpenChange:a,table:s})]})}const Ns=z({id:j(),title:j(),status:j(),label:j(),priority:j()});function Ds({row:s}){const t=Ns.parse(s.original),{setOpen:a,setCurrentRow:r}=O();return e.jsxs(P,{modal:!1,children:[e.jsx(V,{asChild:!0,children:e.jsxs(m,{variant:"ghost",className:"data-[state=open]:bg-muted flex h-8 w-8 p-0",children:[e.jsx(us,{className:"h-4 w-4"}),e.jsx("span",{className:"sr-only",children:"Open menu"})]})}),e.jsxs(I,{align:"end",className:"w-[160px]",children:[e.jsx(k,{onClick:()=>{r(t),a("update")},children:"Edit"}),e.jsx(k,{disabled:!0,children:"Make a copy"}),e.jsx(k,{disabled:!0,children:"Favorite"}),e.jsx(K,{}),e.jsxs(Fe,{children:[e.jsx(Me,{children:"Labels"}),e.jsx(Pe,{children:e.jsx(Ve,{value:t.label,children:ee.map(n=>e.jsx(Ie,{value:n.value,children:n.label},n.value))})})]}),e.jsx(K,{}),e.jsxs(k,{onClick:()=>{r(t),a("delete")},children:["Delete",e.jsx(Ee,{children:e.jsx(re,{size:16})})]})]})]})}const Q=[{id:"select",header:({table:s})=>e.jsx(W,{checked:s.getIsAllPageRowsSelected()||s.getIsSomePageRowsSelected()&&"indeterminate",onCheckedChange:t=>s.toggleAllPageRowsSelected(!!t),"aria-label":"Select all",className:"translate-y-[2px]"}),cell:({row:s})=>e.jsx(W,{checked:s.getIsSelected(),onCheckedChange:t=>s.toggleSelected(!!t),"aria-label":"Select row",className:"translate-y-[2px]"}),enableSorting:!1,enableHiding:!1},{accessorKey:"id",header:({column:s})=>e.jsx(R,{column:s,title:"Task"}),cell:({row:s})=>e.jsx("div",{className:"w-[80px]",children:s.getValue("id")}),enableSorting:!1,enableHiding:!1},{accessorKey:"title",header:({column:s})=>e.jsx(R,{column:s,title:"Title"}),cell:({row:s})=>{const t=ee.find(a=>a.value===s.original.label);return e.jsxs("div",{className:"flex space-x-2",children:[t&&e.jsx(ms,{variant:"outline",children:t.label}),e.jsx("span",{className:"max-w-32 truncate font-medium sm:max-w-72 md:max-w-[31rem]",children:s.getValue("title")})]})}},{accessorKey:"status",header:({column:s})=>e.jsx(R,{column:s,title:"Status"}),cell:({row:s})=>{const t=U.find(a=>a.value===s.getValue("status"));return t?e.jsxs("div",{className:"flex w-[100px] items-center gap-2",children:[t.icon&&e.jsx(t.icon,{className:"text-muted-foreground size-4"}),e.jsx("span",{children:t.label})]}):null},filterFn:(s,t,a)=>a.includes(s.getValue(t))},{accessorKey:"priority",header:({column:s})=>e.jsx(R,{column:s,title:"Priority"}),cell:({row:s})=>{const t=$.find(a=>a.value===s.getValue("priority"));return t?e.jsxs("div",{className:"flex items-center gap-2",children:[t.icon&&e.jsx(t.icon,{className:"text-muted-foreground size-4"}),e.jsx("span",{children:t.label})]}):null},filterFn:(s,t,a)=>a.includes(s.getValue(t))},{id:"actions",cell:({row:s})=>e.jsx(Ds,{row:s})}],X=pe("/_authenticated/tasks/");function Ts({data:s}){const[t,a]=f.useState({}),[r,n]=f.useState([]),[i,o]=f.useState({}),{globalFilter:l,onGlobalFilterChange:h,columnFilters:w,onColumnFiltersChange:ie,pagination:ce,onPaginationChange:de,ensurePageInRange:B}=Ke({search:X.useSearch(),navigate:X.useNavigate(),pagination:{defaultPage:1,defaultPageSize:10},globalFilter:{enabled:!0,key:"filter"},columnFilters:[{columnId:"status",searchKey:"status",type:"array"},{columnId:"priority",searchKey:"priority",type:"array"}]}),g=Ge({data:s,columns:Q,state:{sorting:r,columnVisibility:i,rowSelection:t,columnFilters:w,globalFilter:l,pagination:ce},enableRowSelection:!0,onRowSelectionChange:a,onSortingChange:n,onColumnVisibilityChange:o,globalFilterFn:(p,u,me)=>{const ue=String(p.getValue("id")).toLowerCase(),xe=String(p.getValue("title")).toLowerCase(),_=String(me).toLowerCase();return ue.includes(_)||xe.includes(_)},getCoreRowModel:Ze(),getFilteredRowModel:Xe(),getPaginationRowModel:Qe(),getSortedRowModel:Ye(),getFacetedRowModel:We(),getFacetedUniqueValues:Je(),onPaginationChange:de,onGlobalFilterChange:h,onColumnFiltersChange:ie}),L=g.getPageCount();return f.useEffect(()=>{B(L)},[L,B]),e.jsxs("div",{className:'space-y-4 max-sm:has-[div[role="toolbar"]]:mb-16',children:[e.jsx(es,{table:g,searchPlaceholder:"Filter by title or ID...",filters:[{columnId:"status",title:"Status",options:U},{columnId:"priority",title:"Priority",options:$}]}),e.jsx("div",{className:"overflow-hidden rounded-md border",children:e.jsxs(ts,{children:[e.jsx(as,{children:g.getHeaderGroups().map(p=>e.jsx(M,{children:p.headers.map(u=>e.jsx(ls,{colSpan:u.colSpan,children:u.isPlaceholder?null:G(u.column.columnDef.header,u.getContext())},u.id))},p.id))}),e.jsx(rs,{children:g.getRowModel().rows?.length?g.getRowModel().rows.map(p=>e.jsx(M,{"data-state":p.getIsSelected()&&"selected",children:p.getVisibleCells().map(u=>e.jsx(J,{children:G(u.column.columnDef.cell,u.getContext())},u.id))},p.id)):e.jsx(M,{children:e.jsx(J,{colSpan:Q.length,className:"h-24 text-center",children:"No results."})})})]})}),e.jsx(ss,{table:g}),e.jsx(Ss,{table:g})]})}const Rs=[];function Fs(){return e.jsxs(ws,{children:[e.jsxs(fe,{fixed:!0,children:[e.jsx(je,{}),e.jsxs("div",{className:"ms-auto flex items-center space-x-4",children:[e.jsx(be,{}),e.jsx(ge,{}),e.jsx(ke,{})]})]}),e.jsxs(we,{children:[e.jsxs("div",{className:"mb-2 flex flex-wrap items-center justify-between space-y-2 gap-x-4",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold tracking-tight",children:"Tasks"}),e.jsx("p",{className:"text-muted-foreground",children:"Here's a list of your tasks for this month!"})]}),e.jsx(ys,{})]}),e.jsx("div",{className:"-mx-4 flex-1 overflow-auto px-4 py-1 lg:flex-row lg:space-y-0 lg:space-x-12",children:e.jsx(Ts,{data:Rs})})]}),e.jsx(Cs,{})]})}const wt=Fs;export{wt as component};
