import{c as N,r as o,j as e,u as ue,L as g,C as pe,t as ee,B as y,a as je,b as ge,g as fe,d as Ne,O as ve}from"./index-Ddobsr3m.js";import{u as k,a as ie,S as be,b as ye,c as R,d as S,e as A,D as O,f as B,g as z,h as F,i as b,j as p,k as Ce,l as we,m as ke,n as Se,A as se,o as te,p as ae,q as re,r as Ae,s as Me,t as De,v as _e,w as Te,x as $e,y as Le,z as Ee,B as He}from"./sign-out-dialog-zjgScZaj.js";import{u as v,h as j,H as Pe}from"./help-center-home-BMnoKqTe.js";import{u as Re,g as Oe,S as Be,L as ze}from"./search-provider-TAUzESnP.js";import{c as Fe,u as Ie}from"./index-CUzxaUSy.js";import{c as qe}from"./index-BJAS9rpR.js";import{u as Ke}from"./index-DvmGCMbx.js";import{P as I}from"./index-BpsjUItK.js";import{P as Ge}from"./index-JwH0-21D.js";import{u as Ue}from"./index-BV9DOTas.js";import{B as h}from"./badge-DcyDFdEW.js";import{C as le}from"./chevron-right-CXYEODkB.js";import{B as Qe}from"./bell-C8ehq550.js";import{P as Ve}from"./plus-C6GZc_8K.js";import{S as We,D as Xe,a as Ye,b as Ze,c as Je}from"./dialog-CUOjjpG2.js";import{u as _}from"./useQuery-DoI_LtXo.js";import{C as f,a as T,b as $,c as q,d as C}from"./card-CYxOe6Sh.js";import{S as K}from"./scroll-area-xR0HY-lK.js";import{L as G}from"./loader-circle-CE1cpmjD.js";import{F as L,T as es}from"./thumbs-up-DDBMLx7B.js";import{E as ce}from"./eye-BmrJ9jpJ.js";import{u as ss}from"./useMutation-CtpvqEF0.js";import{S as ne}from"./separator-CaQnzJpH.js";import{C as ts,T as as}from"./thumbs-down-BTdDHrtI.js";import{C as rs}from"./circle-check-CmvYJJxE.js";import{I as ns}from"./input-CpnHfqR8.js";import{A as is}from"./arrow-left-DTZ-O5pf.js";import{X as ls}from"./index-CvLqFEPX.js";import"./index-ALCy5QLf.js";import"./index-B3oVMjfM.js";import"./index-Bzi77JyG.js";import"./index-hZf4kpi-.js";import"./index-CHSzZEsU.js";import"./check-YBYR5b8L.js";import"./twitter-BNjjeVaS.js";import"./trending-up-DtwuSNa4.js";import"./command-D6Cr4XWK.js";import"./shield-alert-DAT36teG.js";import"./index-BdQq_4o_.js";/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cs=[["path",{d:"M3.85 8.62a4 4 0 0 1 4.78-4.77 4 4 0 0 1 6.74 0 4 4 0 0 1 4.78 4.78 4 4 0 0 1 0 6.74 4 4 0 0 1-4.77 4.78 4 4 0 0 1-6.75 0 4 4 0 0 1-4.78-4.77 4 4 0 0 1 0-6.76Z",key:"3c2336"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],os=N("badge-check",cs);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ds=[["path",{d:"m7 15 5 5 5-5",key:"1hf1tw"}],["path",{d:"m7 9 5-5 5 5",key:"sgt6xg"}]],oe=N("chevrons-up-down",ds);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xs=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]],ms=N("house",xs);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hs=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],us=N("log-out",hs);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ps=[["path",{d:"m13.5 8.5-5 5",key:"1cs55j"}],["path",{d:"m8.5 8.5 5 5",key:"a8mexj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]],js=N("search-x",ps);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gs=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]],fs=N("sparkles",gs);var H="Collapsible",[Ns]=qe(H),[vs,U]=Ns(H),de=o.forwardRef((s,t)=>{const{__scopeCollapsible:a,open:n,defaultOpen:r,disabled:c,onOpenChange:l,...i}=s,[x,m]=Ke({prop:n,defaultProp:r??!1,onChange:l,caller:H});return e.jsx(vs,{scope:a,disabled:c,contentId:Ue(),open:x,onOpenToggle:o.useCallback(()=>m(d=>!d),[m]),children:e.jsx(I.div,{"data-state":V(x),"data-disabled":c?"":void 0,...i,ref:t})})});de.displayName=H;var xe="CollapsibleTrigger",me=o.forwardRef((s,t)=>{const{__scopeCollapsible:a,...n}=s,r=U(xe,a);return e.jsx(I.button,{type:"button","aria-controls":r.contentId,"aria-expanded":r.open||!1,"data-state":V(r.open),"data-disabled":r.disabled?"":void 0,disabled:r.disabled,...n,ref:t,onClick:Fe(s.onClick,r.onOpenToggle)})});me.displayName=xe;var Q="CollapsibleContent",he=o.forwardRef((s,t)=>{const{forceMount:a,...n}=s,r=U(Q,s.__scopeCollapsible);return e.jsx(Ge,{present:a||r.open,children:({present:c})=>e.jsx(bs,{...n,ref:t,present:c})})});he.displayName=Q;var bs=o.forwardRef((s,t)=>{const{__scopeCollapsible:a,present:n,children:r,...c}=s,l=U(Q,a),[i,x]=o.useState(n),m=o.useRef(null),d=ue(t,m),M=o.useRef(0),W=M.current,X=o.useRef(0),Y=X.current,P=l.open||i,Z=o.useRef(P),D=o.useRef(void 0);return o.useEffect(()=>{const u=requestAnimationFrame(()=>Z.current=!1);return()=>cancelAnimationFrame(u)},[]),Ie(()=>{const u=m.current;if(u){D.current=D.current||{transitionDuration:u.style.transitionDuration,animationName:u.style.animationName},u.style.transitionDuration="0s",u.style.animationName="none";const J=u.getBoundingClientRect();M.current=J.height,X.current=J.width,Z.current||(u.style.transitionDuration=D.current.transitionDuration,u.style.animationName=D.current.animationName),x(n)}},[l.open,n]),e.jsx(I.div,{"data-state":V(l.open),"data-disabled":l.disabled?"":void 0,id:l.contentId,hidden:!P,...c,ref:d,style:{"--radix-collapsible-content-height":W?`${W}px`:void 0,"--radix-collapsible-content-width":Y?`${Y}px`:void 0,...s.style},children:P&&r})});function V(s){return s?"open":"closed"}var ys=de;function Cs({...s}){return e.jsx(ys,{"data-slot":"collapsible",...s})}function ws({...s}){return e.jsx(me,{"data-slot":"collapsible-trigger",...s})}function ks({...s}){return e.jsx(he,{"data-slot":"collapsible-content",...s})}function Ss({title:s,items:t}){const{state:a,isMobile:n}=k(),r=ie({select:c=>c.href});return e.jsxs(be,{children:[e.jsx(ye,{children:s}),e.jsx(R,{children:t.map(c=>{const l=`${c.title}-${c.url}`;return c.items?a==="collapsed"&&!n?e.jsx(Ds,{item:c,href:r},l):e.jsx(Ms,{item:c,href:r},l):e.jsx(As,{item:c,href:r},l)})})]})}function E({children:s}){return e.jsx(h,{className:"rounded-full px-1 py-0 text-xs",children:s})}function As({item:s,href:t}){const{setOpenMobile:a}=k();return e.jsx(S,{children:e.jsx(A,{asChild:!0,isActive:w(t,s),tooltip:s.title,children:e.jsxs(g,{to:s.url,onClick:()=>a(!1),children:[s.icon&&e.jsx(s.icon,{}),e.jsx("span",{children:s.title}),s.badge&&e.jsx(E,{children:s.badge})]})})})}function Ms({item:s,href:t}){const{setOpenMobile:a}=k();return e.jsx(Cs,{asChild:!0,defaultOpen:w(t,s,!0),className:"group/collapsible",children:e.jsxs(S,{children:[e.jsx(ws,{asChild:!0,children:e.jsxs(A,{tooltip:s.title,children:[s.icon&&e.jsx(s.icon,{}),e.jsx("span",{children:s.title}),s.badge&&e.jsx(E,{children:s.badge}),e.jsx(le,{className:"ms-auto transition-transform duration-200 group-data-[state=open]/collapsible:rotate-90"})]})}),e.jsx(ks,{className:"CollapsibleContent",children:e.jsx(Ce,{children:s.items.map(n=>e.jsx(we,{children:e.jsx(ke,{asChild:!0,isActive:w(t,n),children:e.jsxs(g,{to:n.url,onClick:()=>a(!1),children:[n.icon&&e.jsx(n.icon,{}),e.jsx("span",{children:n.title}),n.badge&&e.jsx(E,{children:n.badge})]})})},n.title))})})]})})}function Ds({item:s,href:t}){return e.jsx(S,{children:e.jsxs(O,{children:[e.jsx(B,{asChild:!0,children:e.jsxs(A,{tooltip:s.title,isActive:w(t,s),children:[s.icon&&e.jsx(s.icon,{}),e.jsx("span",{children:s.title}),s.badge&&e.jsx(E,{children:s.badge}),e.jsx(le,{className:"ms-auto transition-transform duration-200 group-data-[state=open]/collapsible:rotate-90"})]})}),e.jsxs(z,{side:"right",align:"start",sideOffset:4,children:[e.jsxs(F,{children:[s.title," ",s.badge?`(${s.badge})`:""]}),e.jsx(b,{}),s.items.map(a=>e.jsx(p,{asChild:!0,children:e.jsxs(g,{to:a.url,className:`${w(t,a)?"bg-secondary":""}`,children:[a.icon&&e.jsx(a.icon,{}),e.jsx("span",{className:"max-w-52 text-wrap",children:a.title}),a.badge&&e.jsx("span",{className:"ms-auto text-xs",children:a.badge})]})},`${a.title}-${a.url}`))]})]})})}function w(s,t,a=!1){return s===t.url||s.split("?")[0]===t.url||!!t?.items?.filter(n=>n.url===s).length||a&&s.split("/")[1]!==""&&s.split("/")[1]===t?.url?.split("/")[1]}function _s({user:s}){const{isMobile:t}=k(),[a,n]=Se(),c=(l=>{const i=l.split(" ");return i.length>=2?(i[0][0]+i[1][0]).toUpperCase():l.substring(0,2).toUpperCase()})(s.name);return e.jsxs(e.Fragment,{children:[e.jsx(R,{children:e.jsx(S,{children:e.jsxs(O,{children:[e.jsx(B,{asChild:!0,children:e.jsxs(A,{size:"lg",className:"data-[state=open]:bg-sidebar-accent data-[state=open]:text-sidebar-accent-foreground",children:[e.jsxs(se,{className:"h-8 w-8 rounded-lg",children:[e.jsx(te,{src:s.avatar,alt:s.name}),e.jsx(ae,{className:"rounded-lg",children:c})]}),e.jsxs("div",{className:"grid flex-1 text-start text-sm leading-tight",children:[e.jsx("span",{className:"truncate font-semibold",children:s.name}),e.jsx("span",{className:"truncate text-xs",children:s.email})]}),e.jsx(oe,{className:"ms-auto size-4"})]})}),e.jsxs(z,{className:"w-(--radix-dropdown-menu-trigger-width) min-w-56 rounded-lg",side:t?"bottom":"right",align:"end",sideOffset:4,children:[e.jsx(F,{className:"p-0 font-normal",children:e.jsxs("div",{className:"flex items-center gap-2 px-1 py-1.5 text-start text-sm",children:[e.jsxs(se,{className:"h-8 w-8 rounded-lg",children:[e.jsx(te,{src:s.avatar,alt:s.name}),e.jsx(ae,{className:"rounded-lg",children:c})]}),e.jsxs("div",{className:"grid flex-1 text-start text-sm leading-tight",children:[e.jsx("span",{className:"truncate font-semibold",children:s.name}),e.jsx("span",{className:"truncate text-xs",children:s.email})]})]})}),e.jsx(b,{}),e.jsx(re,{children:e.jsxs(p,{children:[e.jsx(fs,{}),"Upgrade to Pro"]})}),e.jsx(b,{}),e.jsxs(re,{children:[e.jsx(p,{asChild:!0,children:e.jsxs(g,{to:"/settings/account",children:[e.jsx(os,{}),"Account"]})}),e.jsx(p,{asChild:!0,children:e.jsxs(g,{to:"/settings",children:[e.jsx(pe,{}),"Billing"]})}),e.jsx(p,{asChild:!0,children:e.jsxs(g,{to:"/settings/notifications",children:[e.jsx(Qe,{}),"Notifications"]})})]}),e.jsx(b,{}),e.jsxs(p,{onClick:()=>n(!0),children:[e.jsx(us,{}),"Sign out"]})]})]})})}),e.jsx(Ae,{open:!!a,onOpenChange:n})]})}function Ts({teams:s,userName:t}){const{isMobile:a}=k(),[n,r]=o.useState(s[0]),c=t||n.plan;return e.jsx(R,{children:e.jsx(S,{children:e.jsxs(O,{children:[e.jsx(B,{asChild:!0,children:e.jsxs(A,{size:"lg",className:"data-[state=open]:bg-sidebar-accent data-[state=open]:text-sidebar-accent-foreground",children:[e.jsx("div",{className:"bg-sidebar-primary text-sidebar-primary-foreground flex aspect-square size-8 items-center justify-center rounded-lg",children:e.jsx(n.logo,{className:"size-4"})}),e.jsxs("div",{className:"grid flex-1 text-start text-sm leading-tight",children:[e.jsx("span",{className:"truncate font-semibold",children:n.name}),e.jsx("span",{className:"truncate text-xs",children:c})]}),e.jsx(oe,{className:"ms-auto"})]})}),e.jsxs(z,{className:"w-(--radix-dropdown-menu-trigger-width) min-w-56 rounded-lg",align:"start",side:a?"bottom":"right",sideOffset:4,children:[e.jsx(F,{className:"text-muted-foreground text-xs",children:"Teams"}),s.map((l,i)=>e.jsxs(p,{onClick:()=>r(l),className:"gap-2 p-2",children:[e.jsx("div",{className:"flex size-6 items-center justify-center rounded-sm border",children:e.jsx(l.logo,{className:"size-4 shrink-0"})}),l.name,e.jsxs(Me,{children:["âŒ˜",i+1]})]},l.name)),e.jsx(b,{}),e.jsxs(p,{className:"gap-2 p-2",children:[e.jsx("div",{className:"bg-background flex size-6 items-center justify-center rounded-md border",children:e.jsx(Ve,{className:"size-4"})}),e.jsx("div",{className:"text-muted-foreground font-medium",children:"Add team"})]})]})]})})})}function $s(){const{collapsible:s,variant:t}=Re(),a=Oe();return e.jsxs(De,{collapsible:s,variant:t,children:[e.jsx(_e,{children:e.jsx(Ts,{teams:a.teams,userName:a.user.name})}),e.jsx(Te,{children:a.navGroups.map(n=>e.jsx(Ss,{...n},n.title))}),e.jsx($e,{children:e.jsx(_s,{user:a.user})}),e.jsx(Le,{})]})}function Ls(){return e.jsx("a",{className:"bg-primary text-primary-foreground hover:bg-primary/90 focus-visible:ring-ring fixed start-44 z-999 -translate-y-52 px-4 py-2 text-sm font-medium whitespace-nowrap opacity-95 shadow-sm transition focus:translate-y-3 focus:transform focus-visible:ring-1",href:"#content",children:"Skip to Main"})}function Es(){const{currentCategorySlug:s,navigateToArticle:t}=v(),{data:a,isLoading:n}=_({queryKey:["help-category",s],queryFn:()=>j.getCategoryBySlug(s),enabled:!!s}),{data:r,isLoading:c}=_({queryKey:["help-articles-by-category",a?.id],queryFn:()=>j.getAllArticles(a.id),enabled:!!a?.id});return n||c?e.jsx("div",{className:"flex items-center justify-center h-full",children:e.jsx(G,{className:"h-8 w-8 animate-spin text-muted-foreground"})}):a?e.jsx(K,{className:"flex-1 p-6",children:e.jsxs("div",{className:"max-w-4xl mx-auto space-y-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("h2",{className:"text-3xl font-bold",children:a.name}),a.description&&e.jsx("p",{className:"text-muted-foreground text-lg",children:a.description}),r&&r.length>0&&e.jsxs(h,{variant:"secondary",children:[r.length," ",r.length===1?"article":"articles"]})]}),r&&r.length>0?e.jsx("div",{className:"space-y-3",children:r.map(l=>e.jsxs(f,{className:"cursor-pointer hover:border-primary transition-colors",onClick:()=>t(l.slug),children:[e.jsx(T,{className:"pb-3",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"mt-1 p-2 rounded-md bg-muted",children:e.jsx(L,{className:"h-4 w-4 text-muted-foreground"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx($,{className:"text-lg",children:l.title}),l.description&&e.jsx(q,{className:"mt-1.5 line-clamp-2",children:l.description})]})]})}),e.jsxs(C,{className:"pt-0 flex items-center gap-4",children:[l.view_count>0&&e.jsxs("div",{className:"flex items-center gap-1.5 text-xs text-muted-foreground",children:[e.jsx(ce,{className:"h-3.5 w-3.5"}),l.view_count," views"]}),l.tags&&l.tags.length>0&&e.jsx("div",{className:"flex gap-1.5",children:l.tags.slice(0,3).map((i,x)=>e.jsx(h,{variant:"outline",className:"text-xs",children:i},x))})]})]},l.id))}):e.jsx(f,{children:e.jsxs(C,{className:"py-12 text-center",children:[e.jsx(L,{className:"h-12 w-12 mx-auto text-muted-foreground/50 mb-4"}),e.jsx("p",{className:"text-muted-foreground",children:"No articles in this category yet."})]})})]})}):e.jsx("div",{className:"flex items-center justify-center h-full",children:e.jsx("p",{className:"text-muted-foreground",children:"Category not found"})})}function Hs(){const{currentArticleSlug:s,navigateToArticle:t}=v(),[a]=o.useState(Date.now()),[n,r]=o.useState(!1),{data:c,isLoading:l}=_({queryKey:["help-article",s],queryFn:()=>j.getArticleBySlug(s),enabled:!!s}),i=c?.article,x=c?.relatedArticles||[];o.useEffect(()=>{i&&j.trackArticleView(i.id,0)},[i]),o.useEffect(()=>()=>{if(i){const d=Math.floor((Date.now()-a)/1e3);j.trackArticleView(i.id,d)}},[i,a]);const m=ss({mutationFn:({isHelpful:d})=>j.submitArticleFeedback(i.id,d),onSuccess:()=>{r(!0),ee.success("Thank you for your feedback!")},onError:()=>{ee.error("Failed to submit feedback")}});return l?e.jsx("div",{className:"flex items-center justify-center h-full",children:e.jsx(G,{className:"h-8 w-8 animate-spin text-muted-foreground"})}):i?e.jsx("div",{className:"flex-1 overflow-hidden flex",children:e.jsx(K,{className:"flex-1 p-6",children:e.jsxs("div",{className:"max-w-3xl mx-auto space-y-6",children:[e.jsxs("div",{className:"space-y-3",children:[i.category_name&&e.jsx(h,{variant:"outline",children:i.category_name}),e.jsx("h1",{className:"text-4xl font-bold tracking-tight",children:i.title}),i.description&&e.jsx("p",{className:"text-xl text-muted-foreground",children:i.description}),e.jsxs("div",{className:"flex items-center gap-4 text-sm text-muted-foreground",children:[e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx(ts,{className:"h-4 w-4"}),new Date(i.updated_at).toLocaleDateString()]}),i.view_count>0&&e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx(ce,{className:"h-4 w-4"}),i.view_count," views"]})]}),i.tags&&i.tags.length>0&&e.jsx("div",{className:"flex gap-2 flex-wrap",children:i.tags.map((d,M)=>e.jsx(h,{variant:"secondary",className:"text-xs",children:d},M))})]}),e.jsx(ne,{}),e.jsx("div",{className:"prose prose-sm dark:prose-invert max-w-none",children:e.jsx("div",{dangerouslySetInnerHTML:{__html:Ps(i.content)}})}),e.jsx(ne,{}),e.jsxs(f,{children:[e.jsxs(T,{children:[e.jsx($,{className:"text-lg",children:"Was this article helpful?"}),e.jsx(q,{children:"Your feedback helps us improve our documentation"})]}),e.jsx(C,{children:n?e.jsxs("div",{className:"flex items-center gap-2 text-green-600",children:[e.jsx(rs,{className:"h-5 w-5"}),e.jsx("span",{className:"font-medium",children:"Thank you for your feedback!"})]}):e.jsxs("div",{className:"flex gap-3",children:[e.jsxs(y,{variant:"outline",onClick:()=>m.mutate({isHelpful:!0}),disabled:m.isPending,children:[e.jsx(es,{className:"h-4 w-4 mr-2"}),"Yes"]}),e.jsxs(y,{variant:"outline",onClick:()=>m.mutate({isHelpful:!1}),disabled:m.isPending,children:[e.jsx(as,{className:"h-4 w-4 mr-2"}),"No"]})]})})]}),x.length>0&&e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-xl font-semibold",children:"Related Articles"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:x.map(d=>e.jsx(f,{className:"cursor-pointer hover:border-primary transition-colors",onClick:()=>t(d.slug),children:e.jsx(T,{className:"pb-2",children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(L,{className:"h-4 w-4 mt-1 text-muted-foreground shrink-0"}),e.jsx($,{className:"text-sm font-medium leading-tight",children:d.title})]})})},d.id))})]})]})})}):e.jsx("div",{className:"flex items-center justify-center h-full",children:e.jsx("p",{className:"text-muted-foreground",children:"Article not found"})})}function Ps(s){if(!s)return"";let t=s;return t=t.replace(/^### (.*$)/gim,"<h3>$1</h3>"),t=t.replace(/^## (.*$)/gim,"<h2>$1</h2>"),t=t.replace(/^# (.*$)/gim,"<h1>$1</h1>"),t=t.replace(/\*\*(.*?)\*\*/gim,"<strong>$1</strong>"),t=t.replace(/\*(.*?)\*/gim,"<em>$1</em>"),t=t.replace(/```([\s\S]*?)```/gim,"<pre><code>$1</code></pre>"),t=t.replace(/`([^`]+)`/gim,"<code>$1</code>"),t=t.replace(/^\* (.*$)/gim,"<li>$1</li>"),t=t.replace(/(<li>.*<\/li>)/gim,"<ul>$1</ul>"),t=t.replace(/\[([^\]]+)\]\(([^)]+)\)/gim,'<a href="$2" target="_blank" rel="noopener noreferrer">$1</a>'),t=t.split(`

`).map(a=>a.trim()?a.startsWith("<h")||a.startsWith("<ul")||a.startsWith("<pre")?a:`<p>${a}</p>`:"").join(`
`),t}function Rs(){const{searchQuery:s,navigateToArticle:t}=v(),{data:a,isLoading:n}=_({queryKey:["help-search",s],queryFn:()=>j.searchArticles(s),enabled:s.length>0});return n?e.jsx("div",{className:"flex items-center justify-center h-full",children:e.jsx(G,{className:"h-8 w-8 animate-spin text-muted-foreground"})}):e.jsx(K,{className:"flex-1 p-6",children:e.jsxs("div",{className:"max-w-4xl mx-auto space-y-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("h2",{className:"text-2xl font-bold",children:['Search Results for "',s,'"']}),a&&a.length>0&&e.jsxs("p",{className:"text-muted-foreground",children:["Found ",a.length," ",a.length===1?"article":"articles"]})]}),a&&a.length>0?e.jsx("div",{className:"space-y-3",children:a.map(r=>e.jsxs(f,{className:"cursor-pointer hover:border-primary transition-colors",onClick:()=>t(r.slug),children:[e.jsx(T,{className:"pb-3",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"mt-1 p-2 rounded-md bg-muted",children:e.jsx(L,{className:"h-4 w-4 text-muted-foreground"})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx($,{className:"text-base",children:r.title}),r.category_name&&e.jsx(h,{variant:"outline",className:"text-xs",children:r.category_name})]}),r.description&&e.jsx(q,{className:"line-clamp-2 text-sm",children:r.description})]})]})}),r.tags&&r.tags.length>0&&e.jsx(C,{className:"pt-0",children:e.jsx("div",{className:"flex gap-1.5 flex-wrap",children:r.tags.slice(0,5).map((c,l)=>e.jsx(h,{variant:"secondary",className:"text-xs",children:c},l))})})]},r.id))}):e.jsx(f,{children:e.jsxs(C,{className:"py-12 text-center",children:[e.jsx(js,{className:"h-12 w-12 mx-auto text-muted-foreground/50 mb-4"}),e.jsx("p",{className:"text-lg font-medium mb-2",children:"No results found"}),e.jsx("p",{className:"text-muted-foreground text-sm",children:"Try different keywords or browse categories"})]})})]})})}function Os(){const{currentView:s,searchQuery:t,navigateToSearch:a,navigateToHome:n,goBack:r,history:c}=v(),[l,i]=o.useState(t);o.useEffect(()=>{i(t)},[t]);const x=d=>{d.preventDefault(),l.trim()&&a(l.trim())},m=c.length>1;return e.jsxs("div",{className:"space-y-4 mt-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[m&&e.jsxs(y,{variant:"ghost",size:"sm",onClick:r,className:"h-8 px-2",children:[e.jsx(is,{className:"h-4 w-4 mr-1"}),"Back"]}),s!=="home"&&e.jsxs(y,{variant:"ghost",size:"sm",onClick:n,className:"h-8 px-2",children:[e.jsx(ms,{className:"h-4 w-4 mr-1"}),"Home"]}),s==="home"&&e.jsx(h,{variant:"secondary",className:"text-xs",children:"Home"}),s==="category"&&e.jsx(h,{variant:"secondary",className:"text-xs",children:"Category"}),s==="article"&&e.jsx(h,{variant:"secondary",className:"text-xs",children:"Article"}),s==="search"&&e.jsx(h,{variant:"secondary",className:"text-xs",children:"Search Results"})]}),e.jsxs("form",{onSubmit:x,className:"relative",children:[e.jsx(We,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),e.jsx(ns,{type:"search",placeholder:"Search help articles... (Press / to focus)",value:l,onChange:d=>i(d.target.value),className:"pl-10 pr-4"})]})]})}function Bs(){const{isOpen:s,closeHelpCenter:t,currentView:a,generateSessionId:n}=v();return o.useEffect(()=>{n()},[n]),o.useEffect(()=>{const r=c=>{c.key==="Escape"&&s&&t()};return window.addEventListener("keydown",r),()=>window.removeEventListener("keydown",r)},[s,t]),e.jsx(Xe,{open:s,onOpenChange:t,children:e.jsxs(Ye,{className:"max-w-[95vw] w-[1400px] h-[90vh] p-0 gap-0 flex flex-col",children:[e.jsxs(Ze,{className:"p-6 pb-4 border-b shrink-0",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(Je,{className:"text-2xl font-bold",children:"Help Center"}),e.jsxs(y,{variant:"ghost",size:"icon",onClick:t,className:"h-8 w-8",children:[e.jsx(ls,{className:"h-4 w-4"}),e.jsx("span",{className:"sr-only",children:"Close"})]})]}),e.jsx(Os,{})]}),e.jsxs("div",{className:"flex-1 overflow-hidden flex flex-col",children:[a==="home"&&e.jsx(Pe,{}),a==="category"&&e.jsx(Es,{}),a==="article"&&e.jsx(Hs,{}),a==="search"&&e.jsx(Rs,{})]})]})})}function zs({children:s}){const t=je(),a=ie(),{auth:n}=ge(),{toggleHelpCenter:r}=v(),c=fe("sidebar_state")!=="false";return o.useEffect(()=>{n.isAuthenticated()||t({to:"/sign-in",search:{redirect:a.href},replace:!0})},[n,t,a]),o.useEffect(()=>{const l=i=>{if((i.metaKey||i.ctrlKey)&&i.key==="k"&&(i.preventDefault(),r()),i.key==="/"&&!i.ctrlKey&&!i.metaKey&&!i.altKey){const x=i.target;x.tagName!=="INPUT"&&x.tagName!=="TEXTAREA"&&(i.preventDefault(),r(),setTimeout(()=>{document.querySelector('input[type="search"]')?.focus()},100))}};return window.addEventListener("keydown",l),()=>window.removeEventListener("keydown",l)},[r]),n.isAuthenticated()?e.jsx(Be,{children:e.jsx(ze,{children:e.jsxs(Ee,{defaultOpen:c,children:[e.jsx(Ls,{}),e.jsx($s,{}),e.jsx(He,{className:Ne("@container/content","has-[[data-layout=fixed]]:h-svh","peer-data-[variant=inset]:has-[[data-layout=fixed]]:h-[calc(100svh-(var(--spacing)*4))]"),children:s??e.jsx(ve,{})}),e.jsx(Bs,{})]})})}):null}const St=zs;export{St as component};
